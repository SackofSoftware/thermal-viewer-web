const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gif-CnEmu0W2.js","assets/index-C5EAXRDY.js","assets/index-juHTAnGa.css","assets/jspdf.es.min-BDRmAi6a.js","assets/ThreeView-CdPkMSpc.js"])))=>i.map(i=>d[i]);
import{r as x,j as c,R as Vt,_ as ns}from"./index-C5EAXRDY.js";var kt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ya={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ba=class{#e=ya;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ge=new ba;function wa(t){setTimeout(t,0)}var Je=typeof window>"u"||"Deno"in globalThis;function fe(){}function xa(t,e){return typeof t=="function"?t(e):t}function Fn(t){return typeof t=="number"&&t>=0&&t!==1/0}function Fr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fe(t,e){return typeof t=="function"?t(e):t}function ye(t,e){return typeof t=="function"?t(e):t}function _s(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:o}=t;if(a){if(s){if(e.queryHash!==ss(a,e.options))return!1}else if(!Tt(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||i&&!i(e))}function Es(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(It(e.options.mutationKey)!==It(i))return!1}else if(!Tt(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function ss(t,e){return(e?.queryKeyHashFn||It)(t)}function It(t){return JSON.stringify(t,(e,n)=>Un(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Tt(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Tt(t[n],e[n])):!1}var va=Object.prototype.hasOwnProperty;function Lr(t,e,n=0){if(t===e)return t;if(n>500)return e;const s=Is(t)&&Is(e);if(!s&&!(Un(t)&&Un(e)))return e;const i=(s?t:Object.keys(t)).length,a=s?e:Object.keys(e),o=a.length,l=s?new Array(o):{};let u=0;for(let d=0;d<o;d++){const h=s?d:a[d],f=t[h],y=e[h];if(f===y){l[h]=f,(s?d<i:va.call(t,h))&&u++;continue}if(f===null||y===null||typeof f!="object"||typeof y!="object"){l[h]=y;continue}const p=Lr(f,y,n+1);l[h]=p,p===f&&u++}return i===o&&u===i?t:l}function Ln(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Is(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Un(t){if(!Ts(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ts(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ts(t){return Object.prototype.toString.call(t)==="[object Object]"}function _a(t){return new Promise(e=>{Ge.setTimeout(e,t)})}function Bn(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Lr(t,e):e}function Ea(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function Ia(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var rs=Symbol();function Ur(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===rs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Br(t,e){return typeof t=="function"?t(...e):!!t}function Ta(t,e,n){let s=!1,r;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(r??=e(),s||(s=!0,r.aborted?n():r.addEventListener("abort",n,{once:!0})),r)}),t}var Sa=class extends kt{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Je&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},is=new Sa;function $n(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var Ca=wa;function Ra(){let t=[],e=0,n=o=>{o()},s=o=>{o()},r=Ca;const i=o=>{e?t.push(o):r(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&r(()=>{s(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{r=o}}}var oe=Ra(),Na=class extends kt{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Je&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},sn=new Na;function ka(t){return Math.min(1e3*2**t,3e4)}function $r(t){return(t??"online")==="online"?sn.isOnline():!0}var Hn=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Hr(t){let e=!1,n=0,s;const r=$n(),i=()=>r.status!=="pending",a=w=>{if(!i()){const m=new Hn(w);f(m),t.onCancel?.(m)}},o=()=>{e=!0},l=()=>{e=!1},u=()=>is.isFocused()&&(t.networkMode==="always"||sn.isOnline())&&t.canRun(),d=()=>$r(t.networkMode)&&t.canRun(),h=w=>{i()||(s?.(),r.resolve(w))},f=w=>{i()||(s?.(),r.reject(w))},y=()=>new Promise(w=>{s=m=>{(i()||u())&&w(m)},t.onPause?.()}).then(()=>{s=void 0,i()||t.onContinue?.()}),p=()=>{if(i())return;let w;const m=n===0?t.initialPromise:void 0;try{w=m??t.fn()}catch(C){w=Promise.reject(C)}Promise.resolve(w).then(h).catch(C=>{if(i())return;const T=t.retry??(Je?0:3),v=t.retryDelay??ka,E=typeof v=="function"?v(n,C):v,D=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,C);if(e||!D){f(C);return}n++,t.onFail?.(n,C),_a(E).then(()=>u()?void 0:y()).then(()=>{e?f(C):p()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(s?.(),r),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?p():y().then(p),r)}}var Vr=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fn(this.gcTime)&&(this.#e=Ge.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Je?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ge.clearTimeout(this.#e),this.#e=void 0)}},Aa=class extends Vr{#e;#t;#n;#r;#s;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Cs(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Cs(this.options);e.data!==void 0&&(this.setState(Ss(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Bn(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(fe).catch(fe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ye(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fe(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Fr(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const n=new AbortController,s=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},r=()=>{const o=Ur(this.options,e),u=(()=>{const d={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(d),d})();return this.#a=!1,this.options.persister?this.options.persister(o,u,this):o(u)},a=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#i({type:"fetch",meta:a.fetchOptions?.meta}),this.#s=Hr({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof Hn&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#s.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#n.config.onSuccess?.(o,this),this.#n.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof Hn){if(o.silent)return this.#s.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#i({type:"error",error:o}),this.#n.config.onError?.(o,this),this.#n.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wr(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...Ss(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?s:void 0,s;case"error":const r=t.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),oe.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Wr(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$r(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ss(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Cs(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Oa=class extends kt{constructor(t,e){super(),this.options=e,this.#e=t,this.#i=null,this.#a=$n(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#a;#i;#m;#h;#f;#l;#u;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Rs(this.#t,this.options)?this.#d():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#v(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ye(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),e._defaulted&&!Ln(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Ns(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),s&&(this.#t!==n||ye(this.options.enabled,this.#t)!==ye(e.enabled,this.#t)||Fe(this.options.staleTime,this.#t)!==Fe(e.staleTime,this.#t))&&this.#g();const r=this.#y();s&&(this.#t!==n||ye(this.options.enabled,this.#t)!==ye(e.enabled,this.#t)||r!==this.#c)&&this.#b(r)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return ja(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),e?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(fe)),e}#g(){this.#x();const t=Fe(this.options.staleTime,this.#t);if(Je||this.#r.isStale||!Fn(t))return;const n=Fr(this.#r.dataUpdatedAt,t)+1;this.#l=Ge.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#v(),this.#c=t,!(Je||ye(this.options.enabled,this.#t)===!1||!Fn(this.#c)||this.#c===0)&&(this.#u=Ge.setInterval(()=>{(this.options.refetchIntervalInBackground||is.isFocused())&&this.#d()},this.#c))}#w(){this.#g(),this.#b(this.#y())}#x(){this.#l&&(Ge.clearTimeout(this.#l),this.#l=void 0)}#v(){this.#u&&(Ge.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,s=this.options,r=this.#r,i=this.#s,a=this.#o,l=t!==n?t.state:this.#n,{state:u}=t;let d={...u},h=!1,f;if(e._optimisticResults){const R=this.hasListeners(),_=!R&&Rs(t,e),A=R&&Ns(t,n,e,s);(_||A)&&(d={...d,...Wr(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:y,errorUpdatedAt:p,status:w}=d;f=d.data;let m=!1;if(e.placeholderData!==void 0&&f===void 0&&w==="pending"){let R;r?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(R=r.data,m=!0):R=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,R!==void 0&&(w="success",f=Bn(r?.data,R,e),h=!0)}if(e.select&&f!==void 0&&!m)if(r&&f===i?.data&&e.select===this.#m)f=this.#h;else try{this.#m=e.select,f=e.select(f),f=Bn(r?.data,f,e),this.#h=f,this.#i=null}catch(R){this.#i=R}this.#i&&(y=this.#i,f=this.#h,p=Date.now(),w="error");const C=d.fetchStatus==="fetching",T=w==="pending",v=w==="error",E=T&&C,D=f!==void 0,k={status:w,fetchStatus:d.fetchStatus,isPending:T,isSuccess:w==="success",isError:v,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:d.dataUpdatedAt,error:y,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:C,isRefetching:C&&!T,isLoadingError:v&&!D,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&D,isStale:as(t,e),refetch:this.refetch,promise:this.#a,isEnabled:ye(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=k.data!==void 0,_=k.status==="error"&&!R,A=U=>{_?U.reject(k.error):R&&U.resolve(k.data)},N=()=>{const U=this.#a=k.promise=$n();A(U)},I=this.#a;switch(I.status){case"pending":t.queryHash===n.queryHash&&A(I);break;case"fulfilled":(_||k.data!==I.value)&&N();break;case"rejected":(!_||k.error!==I.reason)&&N();break}}return k}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#f=this.#t),Ln(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#p.size)return!0;const i=new Set(r??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(a=>{const o=a;return this.#r[o]!==t[o]&&i.has(o)})};this.#E({listeners:n()})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#E(t){oe.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Pa(t,e){return ye(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Rs(t,e){return Pa(t,e)||t.state.data!==void 0&&Vn(t,e,e.refetchOnMount)}function Vn(t,e,n){if(ye(e.enabled,t)!==!1&&Fe(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&as(t,e)}return!1}function Ns(t,e,n,s){return(t!==e||ye(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&as(t,n)}function as(t,e){return ye(e.enabled,t)!==!1&&t.isStaleByTime(Fe(e.staleTime,t))}function ja(t,e){return!Ln(t.getCurrentResult(),e)}function ks(t){return{onFetch:(e,n)=>{const s=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let d=!1;const h=p=>{Ta(p,()=>e.signal,()=>d=!0)},f=Ur(e.options,e.fetchOptions),y=async(p,w,m)=>{if(d)return Promise.reject();if(w==null&&p.pages.length)return Promise.resolve(p);const T=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:w,direction:m?"backward":"forward",meta:e.options.meta};return h(L),L})(),v=await f(T),{maxPages:E}=e.options,D=m?Ia:Ea;return{pages:D(p.pages,v,E),pageParams:D(p.pageParams,w,E)}};if(r&&i.length){const p=r==="backward",w=p?Da:As,m={pages:i,pageParams:a},C=w(s,m);o=await y(m,C,p)}else{const p=t??i.length;do{const w=l===0?a[0]??s.initialPageParam:As(s,o);if(l>0&&w==null)break;o=await y(o,w),l++}while(l<p)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=u}}}function As(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function Da(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var Ma=class extends Vr{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||Fa(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Hr({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#s({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)e();else{this.#s({type:"pending",variables:t,isPaused:r}),this.#n.config.onMutate&&await this.#n.config.onMutate(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:t,isPaused:r})}const i=await this.#r.start();return await this.#n.config.onSuccess?.(i,t,this.state.context,this,n),await this.options.onSuccess?.(i,t,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,t,this.state.context,n),this.#s({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,t,this.state.context,this,n)}catch(a){Promise.reject(a)}try{await this.options.onError?.(i,t,this.state.context,n)}catch(a){Promise.reject(a)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(a){Promise.reject(a)}try{await this.options.onSettled?.(void 0,i,t,this.state.context,n)}catch(a){Promise.reject(a)}throw this.#s({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),oe.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function Fa(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var La=class extends kt{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const s=new Ma({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){this.#e.add(t);const e=Wt(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Wt(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Wt(t);if(typeof e=="string"){const s=this.#t.get(e)?.find(r=>r.state.status==="pending");return!s||s===t}else return!0}runNext(t){const e=Wt(t);return typeof e=="string"?this.#t.get(e)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){oe.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Es(e,n))}findAll(t={}){return this.getAll().filter(e=>Es(t,e))}notify(t){oe.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return oe.batch(()=>Promise.all(t.map(e=>e.continue().catch(fe))))}};function Wt(t){return t.options.scope?.id}var Ua=class extends kt{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const s=e.queryKey,r=e.queryHash??ss(s,e);let i=this.get(r);return i||(i=new Aa({client:t,queryKey:s,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){oe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>_s(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>_s(t,n)):e}notify(t){oe.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){oe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){oe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ba=class{#e;#t;#n;#r;#s;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new Ua,this.#t=t.mutationCache||new La,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=is.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=sn.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Fe(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(s.queryHash)?.state.data,a=xa(e,i);if(a!==void 0)return this.#e.build(this,s).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return oe.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;oe.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return oe.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=oe.batch(()=>this.#e.findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(fe).catch(fe)}invalidateQueries(t,e={}){return oe.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=oe.batch(()=>this.#e.findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(fe)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(fe)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Fe(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fe).catch(fe)}fetchInfiniteQuery(t){return t.behavior=ks(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fe).catch(fe)}ensureInfiniteQueryData(t){return t.behavior=ks(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return sn.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(It(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(s=>{Tt(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(It(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(s=>{Tt(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ss(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===rs&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},zr=x.createContext(void 0),qr=t=>{const e=x.useContext(zr);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$a=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(zr.Provider,{value:t,children:e})),Gr=x.createContext(!1),Ha=()=>x.useContext(Gr);Gr.Provider;function Va(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Wa=x.createContext(Va()),za=()=>x.useContext(Wa),qa=(t,e,n)=>{const s=n?.state.error&&typeof t.throwOnError=="function"?Br(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||s)&&(e.isReset()||(t.retryOnMount=!1))},Ga=t=>{x.useEffect(()=>{t.clearReset()},[t])},Ka=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||Br(n,[t.error,s])),Qa=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>n(s(...r)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ja=(t,e)=>t.isLoading&&t.isFetching&&!e,Ya=(t,e)=>t?.suspense&&e.isPending,Os=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Xa(t,e,n){const s=Ha(),r=za(),i=qr(),a=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a);const o=i.getQueryCache().get(a.queryHash);a._optimisticResults=s?"isRestoring":"optimistic",Qa(a),qa(a,r,o),Ga(r);const l=!i.getQueryCache().get(a.queryHash),[u]=x.useState(()=>new e(i,a)),d=u.getOptimisticResult(a),h=!s&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(f=>{const y=h?u.subscribe(oe.batchCalls(f)):fe;return u.updateResult(),y},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),x.useEffect(()=>{u.setOptions(a)},[a,u]),Ya(a,d))throw Os(a,u,r);if(Ka({result:d,errorResetBoundary:r,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!Je&&Ja(d,s)&&(l?Os(a,u,r):o?.promise)?.catch(fe).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?d:u.trackResult(d)}function yt(t,e){return Xa(t,Oa)}const Za=()=>{};var Ps={};const Kr=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},eo=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Qr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,d=i>>2,h=(i&3)<<4|o>>4;let f=(o&15)<<2|u>>6,y=u&63;l||(y=64,a||(f=64)),s.push(n[d],n[h],n[f],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kr(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eo(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||u==null||h==null)throw new to;const f=i<<2|o>>4;if(s.push(f),u!==64){const y=o<<4&240|u>>2;if(s.push(y),h!==64){const p=u<<6&192|h;s.push(p)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class to extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const no=function(t){const e=Kr(t);return Qr.encodeByteArray(e,!0)},Jr=function(t){return no(t).replace(/\./g,"")},Yr=function(t){try{return Qr.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function so(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ro=()=>so().__FIREBASE_DEFAULTS__,io=()=>{if(typeof process>"u"||typeof Ps>"u")return;const t=Ps.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ao=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yr(t[1]);return e&&JSON.parse(e)},os=()=>{try{return Za()||ro()||io()||ao()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oo=t=>os()?.emulatorHosts?.[t],Xr=()=>os()?.config,Zr=t=>os()?.[`_${t}`];class co{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function fn(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lo(t){return(await fetch(t,{credentials:"include"})).ok}const _t={};function uo(){const t={prod:[],emulator:[]};for(const e of Object.keys(_t))_t[e]?t.emulator.push(e):t.prod.push(e);return t}function ho(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let js=!1;function fo(t,e){if(typeof window>"u"||typeof document>"u"||!fn(window.location.host)||_t[t]===e||_t[t]||js)return;_t[t]=e;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",i=uo().prod.length>0;function a(){const f=document.getElementById(s);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{js=!0,a()},f}function d(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=ho(s),y=n("text"),p=document.getElementById(y)||document.createElement("span"),w=n("learnmore"),m=document.getElementById(w)||document.createElement("a"),C=n("preprendIcon"),T=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;o(v),d(m,w);const E=u();l(T,C),v.append(T,p,m,E),document.body.appendChild(v)}i?(p.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function de(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function po(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function mo(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function go(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yo(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bo(){const t=de();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wo(){try{return typeof indexedDB=="object"}catch{return!1}}function xo(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const vo="FirebaseError";class $e extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=vo,Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}}class At{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?_o(i,s):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new $e(r,o,s)}}function _o(t,e){return t.replace(Eo,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Eo=/\{\$([^}]+)}/g;function Io(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ct(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(Ds(i)&&Ds(a)){if(!ct(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Ds(t){return t!==null&&typeof t=="object"}function Ot(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wt(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function xt(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function To(t,e){const n=new So(t,e);return n.subscribe.bind(n)}class So{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Co(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=In),r.error===void 0&&(r.error=In),r.complete===void 0&&(r.complete=In);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Co(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function In(){}function He(t){return t&&t._delegate?t._delegate:t}class lt{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qe="[DEFAULT]";class Ro{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new co;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ko(e))try{this.getOrInitializeService({instanceIdentifier:qe})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=qe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qe){return this.instances.has(e)}getOptions(e=qe){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);s===o&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:No(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qe){return this.component?this.component.multipleInstances?e:qe:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function No(t){return t===qe?void 0:t}function ko(t){return t.instantiationMode==="EAGER"}class Ao{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ro(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(z||(z={}));const Oo={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},Po=z.INFO,jo={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Do=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=jo[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ei{constructor(e){this.name=e,this._logLevel=Po,this._logHandler=Do,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...e),this._logHandler(this,z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...e),this._logHandler(this,z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,z.INFO,...e),this._logHandler(this,z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,z.WARN,...e),this._logHandler(this,z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...e),this._logHandler(this,z.ERROR,...e)}}const Mo=(t,e)=>e.some(n=>t instanceof n);let Ms,Fs;function Fo(){return Ms||(Ms=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lo(){return Fs||(Fs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ti=new WeakMap,Wn=new WeakMap,ni=new WeakMap,Tn=new WeakMap,cs=new WeakMap;function Uo(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Le(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&ti.set(n,t)}).catch(()=>{}),cs.set(e,t),e}function Bo(t){if(Wn.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Wn.set(t,e)}let zn={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wn.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ni.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Le(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $o(t){zn=t(zn)}function Ho(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Sn(this),e,...n);return ni.set(s,e.sort?e.sort():[e]),Le(s)}:Lo().includes(t)?function(...e){return t.apply(Sn(this),e),Le(ti.get(this))}:function(...e){return Le(t.apply(Sn(this),e))}}function Vo(t){return typeof t=="function"?Ho(t):(t instanceof IDBTransaction&&Bo(t),Mo(t,Fo())?new Proxy(t,zn):t)}function Le(t){if(t instanceof IDBRequest)return Uo(t);if(Tn.has(t))return Tn.get(t);const e=Vo(t);return e!==t&&(Tn.set(t,e),cs.set(e,t)),e}const Sn=t=>cs.get(t);function Wo(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=Le(a);return s&&a.addEventListener("upgradeneeded",l=>{s(Le(a.result),l.oldVersion,l.newVersion,Le(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const zo=["get","getKey","getAll","getAllKeys","count"],qo=["put","add","delete","clear"],Cn=new Map;function Ls(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cn.get(e))return Cn.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=qo.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||zo.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),r&&l.done]))[0]};return Cn.set(e,i),i}$o(t=>({...t,get:(e,n,s)=>Ls(e,n)||t.get(e,n,s),has:(e,n)=>!!Ls(e,n)||t.has(e,n)}));class Go{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ko(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Ko(t){return t.getComponent()?.type==="VERSION"}const qn="@firebase/app",Us="0.14.8";const Ne=new ei("@firebase/app"),Qo="@firebase/app-compat",Jo="@firebase/analytics-compat",Yo="@firebase/analytics",Xo="@firebase/app-check-compat",Zo="@firebase/app-check",ec="@firebase/auth",tc="@firebase/auth-compat",nc="@firebase/database",sc="@firebase/data-connect",rc="@firebase/database-compat",ic="@firebase/functions",ac="@firebase/functions-compat",oc="@firebase/installations",cc="@firebase/installations-compat",lc="@firebase/messaging",uc="@firebase/messaging-compat",dc="@firebase/performance",hc="@firebase/performance-compat",fc="@firebase/remote-config",pc="@firebase/remote-config-compat",mc="@firebase/storage",gc="@firebase/storage-compat",yc="@firebase/firestore",bc="@firebase/ai",wc="@firebase/firestore-compat",xc="firebase",vc="12.9.0";const Gn="[DEFAULT]",_c={[qn]:"fire-core",[Qo]:"fire-core-compat",[Yo]:"fire-analytics",[Jo]:"fire-analytics-compat",[Zo]:"fire-app-check",[Xo]:"fire-app-check-compat",[ec]:"fire-auth",[tc]:"fire-auth-compat",[nc]:"fire-rtdb",[sc]:"fire-data-connect",[rc]:"fire-rtdb-compat",[ic]:"fire-fn",[ac]:"fire-fn-compat",[oc]:"fire-iid",[cc]:"fire-iid-compat",[lc]:"fire-fcm",[uc]:"fire-fcm-compat",[dc]:"fire-perf",[hc]:"fire-perf-compat",[fc]:"fire-rc",[pc]:"fire-rc-compat",[mc]:"fire-gcs",[gc]:"fire-gcs-compat",[yc]:"fire-fst",[wc]:"fire-fst-compat",[bc]:"fire-vertex","fire-js":"fire-js",[xc]:"fire-js-all"};const rn=new Map,Ec=new Map,Kn=new Map;function Bs(t,e){try{t.container.addComponent(e)}catch(n){Ne.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function St(t){const e=t.name;if(Kn.has(e))return Ne.debug(`There were multiple attempts to register component ${e}.`),!1;Kn.set(e,t);for(const n of rn.values())Bs(n,t);for(const n of Ec.values())Bs(n,t);return!0}function si(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ee(t){return t==null?!1:t.settings!==void 0}const Ic={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ue=new At("app","Firebase",Ic);class Tc{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ue.create("app-deleted",{appName:this._name})}}const Pt=vc;function ri(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Gn,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ue.create("bad-app-name",{appName:String(r)});if(n||(n=Xr()),!n)throw Ue.create("no-options");const i=rn.get(r);if(i){if(ct(n,i.options)&&ct(s,i.config))return i;throw Ue.create("duplicate-app",{appName:r})}const a=new Ao(r);for(const l of Kn.values())a.addComponent(l);const o=new Tc(n,s,a);return rn.set(r,o),o}function Sc(t=Gn){const e=rn.get(t);if(!e&&t===Gn&&Xr())return ri();if(!e)throw Ue.create("no-app",{appName:t});return e}function rt(t,e,n){let s=_c[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ne.warn(a.join(" "));return}St(new lt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Cc="firebase-heartbeat-database",Rc=1,Ct="firebase-heartbeat-store";let Rn=null;function ii(){return Rn||(Rn=Wo(Cc,Rc,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ct)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ue.create("idb-open",{originalErrorMessage:t.message})})),Rn}async function Nc(t){try{const n=(await ii()).transaction(Ct),s=await n.objectStore(Ct).get(ai(t));return await n.done,s}catch(e){if(e instanceof $e)Ne.warn(e.message);else{const n=Ue.create("idb-get",{originalErrorMessage:e?.message});Ne.warn(n.message)}}}async function $s(t,e){try{const s=(await ii()).transaction(Ct,"readwrite");await s.objectStore(Ct).put(e,ai(t)),await s.done}catch(n){if(n instanceof $e)Ne.warn(n.message);else{const s=Ue.create("idb-set",{originalErrorMessage:n?.message});Ne.warn(s.message)}}}function ai(t){return`${t.name}!${t.options.appId}`}const kc=1024,Ac=30;class Oc{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jc(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hs();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Ac){const r=Dc(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ne.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hs(),{heartbeatsToSend:n,unsentEntries:s}=Pc(this._heartbeatsCache.heartbeats),r=Jr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Ne.warn(e),""}}}function Hs(){return new Date().toISOString().substring(0,10)}function Pc(t,e=kc){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Vs(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Vs(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wo()?xo().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nc(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return $s(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return $s(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vs(t){return Jr(JSON.stringify({version:2,heartbeats:t})).length}function Dc(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Mc(t){St(new lt("platform-logger",e=>new Go(e),"PRIVATE")),St(new lt("heartbeat",e=>new Oc(e),"PRIVATE")),rt(qn,Us,t),rt(qn,Us,"esm2020"),rt("fire-js","")}Mc("");function oi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fc=oi,ci=new At("auth","Firebase",oi());const an=new ei("@firebase/auth");function Lc(t,...e){an.logLevel<=z.WARN&&an.warn(`Auth (${Pt}): ${t}`,...e)}function Kt(t,...e){an.logLevel<=z.ERROR&&an.error(`Auth (${Pt}): ${t}`,...e)}function we(t,...e){throw ls(t,...e)}function Ie(t,...e){return ls(t,...e)}function li(t,e,n){const s={...Fc(),[e]:n};return new At("auth","Firebase",s).create(e,{appName:t.name})}function Be(t){return li(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ls(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return ci.create(t,...e)}function O(t,e,...n){if(!t)throw ls(e,...n)}function Se(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kt(e),new Error(e)}function ke(t,e){t||Se(e)}function Qn(){return typeof self<"u"&&self.location?.href||""}function Uc(){return Ws()==="http:"||Ws()==="https:"}function Ws(){return typeof self<"u"&&self.location?.protocol||null}function Bc(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uc()||go()||"connection"in navigator)?navigator.onLine:!0}function $c(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class jt{constructor(e,n){this.shortDelay=e,this.longDelay=n,ke(n>e,"Short delay should be less than long delay!"),this.isMobile=po()||yo()}get(){return Bc()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function us(t,e){ke(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ui{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Vc=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wc=new jt(3e4,6e4);function Ze(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ve(t,e,n,s,r={}){return di(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const o=Ot({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return mo()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&fn(t.emulatorConfig.host)&&(u.credentials="include"),ui.fetch()(await hi(t,t.config.apiHost,n,o),u)})}async function di(t,e,n){t._canInitEmulator=!1;const s={...Hc,...e};try{const r=new qc(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw zt(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zt(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw zt(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw zt(t,"user-disabled",a);const d=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw li(t,d,u);we(t,d)}}catch(r){if(r instanceof $e)throw r;we(t,"network-request-failed",{message:String(r)})}}async function pn(t,e,n,s,r={}){const i=await Ve(t,e,n,s,r);return"mfaPendingCredential"in i&&we(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function hi(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?us(t.config,r):`${t.config.apiScheme}://${r}`;return Vc.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function zc(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qc{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ie(this.auth,"network-request-failed")),Wc.get())})}}function zt(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ie(t,e,s);return r.customData._tokenResponse=n,r}function zs(t){return t!==void 0&&t.enterprise!==void 0}class Gc{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zc(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kc(t,e){return Ve(t,"GET","/v2/recaptchaConfig",Ze(t,e))}async function Qc(t,e){return Ve(t,"POST","/v1/accounts:delete",e)}async function on(t,e){return Ve(t,"POST","/v1/accounts:lookup",e)}function Et(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jc(t,e=!1){const n=He(t),s=await n.getIdToken(e),r=ds(s);O(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i?.sign_in_provider;return{claims:r,token:s,authTime:Et(Nn(r.auth_time)),issuedAtTime:Et(Nn(r.iat)),expirationTime:Et(Nn(r.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Nn(t){return Number(t)*1e3}function ds(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Kt("JWT malformed, contained fewer than 3 sections"),null;try{const r=Yr(n);return r?JSON.parse(r):(Kt("Failed to decode base64 JWT payload"),null)}catch(r){return Kt("Caught error parsing JWT payload as JSON",r?.toString()),null}}function qs(t){const e=ds(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Rt(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof $e&&Yc(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Yc({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Xc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jn{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Et(this.lastLoginAt),this.creationTime=Et(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cn(t){const e=t.auth,n=await t.getIdToken(),s=await Rt(t,on(e,{idToken:n}));O(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?fi(r.providerUserInfo):[],a=el(t.providerData,i),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!a?.length,u=o?l:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Jn(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Zc(t){const e=He(t);await cn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function el(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function fi(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function tl(t,e){const n=await di(t,{},async()=>{const s=Ot({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await hi(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:s};return t.emulatorConfig&&fn(t.emulatorConfig.host)&&(l.credentials="include"),ui.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nl(t,e){return Ve(t,"POST","/v2/accounts:revokeToken",Ze(t,e))}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){O(e.length!==0,"internal-error");const n=qs(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await tl(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new it;return s&&(O(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(O(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(O(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return Se("not implemented")}}function Ae(t,e){O(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class be{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Xc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Jn(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Rt(this,this.stsTokenManager.getToken(this.auth,e));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jc(this,e)}reload(){return Zc(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new be({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await cn(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ee(this.auth.app))return Promise.reject(Be(this.auth));const e=await this.getIdToken();return await Rt(this,Qc(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:y,providerData:p,stsTokenManager:w}=n;O(h&&w,e,"internal-error");const m=it.fromJSON(this.name,w);O(typeof h=="string",e,"internal-error"),Ae(s,e.name),Ae(r,e.name),O(typeof f=="boolean",e,"internal-error"),O(typeof y=="boolean",e,"internal-error"),Ae(i,e.name),Ae(a,e.name),Ae(o,e.name),Ae(l,e.name),Ae(u,e.name),Ae(d,e.name);const C=new be({uid:h,auth:e,email:r,emailVerified:f,displayName:s,isAnonymous:y,photoURL:a,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:u,lastLoginAt:d});return p&&Array.isArray(p)&&(C.providerData=p.map(T=>({...T}))),l&&(C._redirectEventId=l),C}static async _fromIdTokenResponse(e,n,s=!1){const r=new it;r.updateFromServerResponse(n);const i=new be({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await cn(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];O(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?fi(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!i?.length,o=new it;o.updateFromIdToken(s);const l=new be({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Jn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Gs=new Map;function Ce(t){ke(t instanceof Function,"Expected a class definition");let e=Gs.get(t);return e?(ke(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gs.set(t,e),e)}class pi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pi.type="NONE";const Ks=pi;function Qt(t,e,n){return`firebase:${t}:${e}:${n}`}class at{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Qt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Qt("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await on(this.auth,{idToken:e}).catch(()=>{});return n?be._fromGetAccountInfoResponse(this.auth,n,e):null}return be._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new at(Ce(Ks),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Ce(Ks);const a=Qt(s,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){let h;if(typeof d=="string"){const f=await on(e,{idToken:d}).catch(()=>{});if(!f)break;h=await be._fromGetAccountInfoResponse(e,f,d)}else h=be._fromJSON(e,d);u!==i&&(o=h),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new at(i,e,s):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new at(i,e,s))}}function Qs(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bi(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mi(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xi(e))return"Blackberry";if(vi(e))return"Webos";if(gi(e))return"Safari";if((e.includes("chrome/")||yi(e))&&!e.includes("edge/"))return"Chrome";if(wi(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function mi(t=de()){return/firefox\//i.test(t)}function gi(t=de()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yi(t=de()){return/crios\//i.test(t)}function bi(t=de()){return/iemobile/i.test(t)}function wi(t=de()){return/android/i.test(t)}function xi(t=de()){return/blackberry/i.test(t)}function vi(t=de()){return/webos/i.test(t)}function hs(t=de()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sl(t=de()){return hs(t)&&!!window.navigator?.standalone}function rl(){return bo()&&document.documentMode===10}function _i(t=de()){return hs(t)||wi(t)||vi(t)||xi(t)||/windows phone/i.test(t)||bi(t)}function Ei(t,e=[]){let n;switch(t){case"Browser":n=Qs(de());break;case"Worker":n=`${Qs(de())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pt}/${s}`}class il{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function al(t,e={}){return Ve(t,"GET","/v2/passwordPolicy",Ze(t,e))}const ol=6;class cl{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ol,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ll{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Js(this),this.idTokenSubscription=new Js(this),this.beforeStateQueue=new il(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ci,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ce(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await at.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await on(this,{idToken:e}),s=await be._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ee(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=s?._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&o?.user&&(s=o.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$c()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ee(this.app))return Promise.reject(Be(this));const n=e?He(e):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ee(this.app)?Promise.reject(Be(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ee(this.app)?Promise.reject(Be(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ce(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await al(this),n=new cl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new At("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nl(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ce(e)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=await at.create(this,[Ce(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ee(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Lc(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ht(t){return He(t)}class Js{constructor(e){this.auth=e,this.observer=null,this.addObserver=To(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ul(t){mn=t}function Ii(t){return mn.loadJS(t)}function dl(){return mn.recaptchaEnterpriseScript}function hl(){return mn.gapiScript}function fl(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pl{constructor(){this.enterprise=new ml}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ml{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gl="recaptcha-enterprise",Ti="NO_RECAPTCHA";class yl{constructor(e){this.type=gl,this.auth=ht(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{Kc(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Gc(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function r(i,a,o){const l=window.grecaptcha;zs(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(Ti)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pl().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(o=>{if(!n&&zs(window.grecaptcha))r(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dl();l.length!==0&&(l+=o),Ii(l).then(()=>{r(o,i,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Ys(t,e,n,s=!1,r=!1){const i=new yl(t);let a;if(r)a=Ti;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xs(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ys(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Ys(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(i)})}function bl(t,e){const n=si(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ct(i,e??{}))return r;we(r,"already-initialized")}return n.initialize({options:e})}function wl(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ce);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function xl(t,e,n){const s=ht(t);O(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Si(e),{host:a,port:o}=vl(e),l=o===null?"":`:${o}`,u={url:`${i}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){O(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),O(ct(u,s.config.emulator)&&ct(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,fn(a)?(lo(`${i}//${a}${l}`),fo("Auth",!0)):_l()}function Si(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vl(t){const e=Si(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Zs(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:Zs(a)}}}function Zs(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _l(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class fs{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Se("not implemented")}_getIdTokenResponse(e){return Se("not implemented")}_linkToIdToken(e,n){return Se("not implemented")}_getReauthenticationResolver(e){return Se("not implemented")}}async function El(t,e){return Ve(t,"POST","/v1/accounts:signUp",e)}async function Il(t,e){return pn(t,"POST","/v1/accounts:signInWithPassword",Ze(t,e))}async function Tl(t,e){return pn(t,"POST","/v1/accounts:signInWithEmailLink",Ze(t,e))}async function Sl(t,e){return pn(t,"POST","/v1/accounts:signInWithEmailLink",Ze(t,e))}class Nt extends fs{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Nt(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Nt(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xs(e,n,"signInWithPassword",Il);case"emailLink":return Tl(e,{email:this._email,oobCode:this._password});default:we(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xs(e,s,"signUpPassword",El);case"emailLink":return Sl(e,{idToken:n,email:this._email,oobCode:this._password});default:we(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ot(t,e){return pn(t,"POST","/v1/accounts:signInWithIdp",Ze(t,e))}const Cl="http://localhost";class Ye extends fs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ye(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):we("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const a=new Ye(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ot(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ot(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ot(e,n)}buildRequest(){const e={requestUri:Cl,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ot(n)}return e}}function Rl(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nl(t){const e=wt(xt(t)).link,n=e?wt(xt(e)).deep_link_id:null,s=wt(xt(t)).deep_link_id;return(s?wt(xt(s)).link:null)||s||n||e||t}class ps{constructor(e){const n=wt(xt(e)),s=n.apiKey??null,r=n.oobCode??null,i=Rl(n.mode??null);O(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Nl(e);try{return new ps(n)}catch{return null}}}class ft{constructor(){this.providerId=ft.PROVIDER_ID}static credential(e,n){return Nt._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ps.parseLink(n);return O(s,"argument-error"),Nt._fromEmailAndCode(e,s.code,s.tenantId)}}ft.PROVIDER_ID="password";ft.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ft.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ci{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Dt extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oe extends Dt{constructor(){super("facebook.com")}static credential(e){return Ye._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oe.credential(e.oauthAccessToken)}catch{return null}}}Oe.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oe.PROVIDER_ID="facebook.com";class Pe extends Dt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ye._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Pe.credential(n,s)}catch{return null}}}Pe.GOOGLE_SIGN_IN_METHOD="google.com";Pe.PROVIDER_ID="google.com";class je extends Dt{constructor(){super("github.com")}static credential(e){return Ye._fromParams({providerId:je.PROVIDER_ID,signInMethod:je.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return je.credentialFromTaggedObject(e)}static credentialFromError(e){return je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return je.credential(e.oauthAccessToken)}catch{return null}}}je.GITHUB_SIGN_IN_METHOD="github.com";je.PROVIDER_ID="github.com";class De extends Dt{constructor(){super("twitter.com")}static credential(e,n){return Ye._fromParams({providerId:De.PROVIDER_ID,signInMethod:De.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return De.credentialFromTaggedObject(e)}static credentialFromError(e){return De.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return De.credential(n,s)}catch{return null}}}De.TWITTER_SIGN_IN_METHOD="twitter.com";De.PROVIDER_ID="twitter.com";class ut{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await be._fromIdTokenResponse(e,s,r),a=er(s);return new ut({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=er(s);return new ut({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function er(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ln extends $e{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ln.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ln(e,n,s,r)}}function Ri(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ln._fromErrorAndOperation(t,i,e,s):i})}async function kl(t,e,n=!1){const s=await Rt(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ut._forOperation(t,"link",s)}async function Al(t,e,n=!1){const{auth:s}=t;if(Ee(s.app))return Promise.reject(Be(s));const r="reauthenticate";try{const i=await Rt(t,Ri(s,r,e,t),n);O(i.idToken,s,"internal-error");const a=ds(i.idToken);O(a,s,"internal-error");const{sub:o}=a;return O(t.uid===o,s,"user-mismatch"),ut._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&we(s,"user-mismatch"),i}}async function Ni(t,e,n=!1){if(Ee(t.app))return Promise.reject(Be(t));const s="signIn",r=await Ri(t,s,e),i=await ut._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function Ol(t,e){return Ni(ht(t),e)}async function Pl(t){const e=ht(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function jl(t,e,n){return Ee(t.app)?Promise.reject(Be(t)):Ol(He(t),ft.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Pl(t),s})}function Dl(t,e,n,s){return He(t).onIdTokenChanged(e,n,s)}function Ml(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function Fl(t,e,n,s){return He(t).onAuthStateChanged(e,n,s)}const un="__sak";class ki{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(un,"1"),this.storage.removeItem(un),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ll=1e3,Ul=10;class Ai extends ki{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_i(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);rl()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Ul):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ll)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ai.type="LOCAL";const Bl=Ai;class Oi extends ki{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Oi.type="SESSION";const Pi=Oi;function $l(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class gn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new gn(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const o=Array.from(a).map(async u=>u(n.origin,i)),l=await $l(o);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gn.receivers=[];function ms(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class Hl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const u=ms("",20);r.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Te(){return window}function Vl(t){Te().location.href=t}function ji(){return typeof Te().WorkerGlobalScope<"u"&&typeof Te().importScripts=="function"}async function Wl(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zl(){return navigator?.serviceWorker?.controller||null}function ql(){return ji()?self:null}const Di="firebaseLocalStorageDb",Gl=1,dn="firebaseLocalStorage",Mi="fbase_key";class Mt{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yn(t,e){return t.transaction([dn],e?"readwrite":"readonly").objectStore(dn)}function Kl(){const t=indexedDB.deleteDatabase(Di);return new Mt(t).toPromise()}function Yn(){const t=indexedDB.open(Di,Gl);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(dn,{keyPath:Mi})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(dn)?e(s):(s.close(),await Kl(),e(await Yn()))})})}async function tr(t,e,n){const s=yn(t,!0).put({[Mi]:e,value:n});return new Mt(s).toPromise()}async function Ql(t,e){const n=yn(t,!1).get(e),s=await new Mt(n).toPromise();return s===void 0?null:s.value}function nr(t,e){const n=yn(t,!0).delete(e);return new Mt(n).toPromise()}const Jl=800,Yl=3;class Fi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yn(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Yl)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ji()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gn._getInstance(ql()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Wl(),!this.activeServiceWorker)return;this.sender=new Hl(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zl()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yn();return await tr(e,un,"1"),await nr(e,un),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>tr(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Ql(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nr(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=yn(r,!1).getAll();return new Mt(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jl)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fi.type="LOCAL";const Xl=Fi;new jt(3e4,6e4);function Zl(t,e){return e?Ce(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class gs extends fs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ot(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ot(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ot(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eu(t){return Ni(t.auth,new gs(t),t.bypassAuthState)}function tu(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),Al(n,new gs(t),t.bypassAuthState)}async function nu(t){const{auth:e,user:n}=t;return O(n,e,"internal-error"),kl(n,new gs(t),t.bypassAuthState)}class Li{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eu;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return tu;default:we(this.auth,"internal-error")}}resolve(e){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const su=new jt(2e3,1e4);class st extends Li{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,st.currentPopupAction&&st.currentPopupAction.cancel(),st.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return O(e,this.auth,"internal-error"),e}async onExecution(){ke(this.filter.length===1,"Popup operations only handle one event");const e=ms();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ie(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,st.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,su.get())};e()}}st.currentPopupAction=null;const ru="pendingRedirect",Jt=new Map;class iu extends Li{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Jt.get(this.auth._key());if(!e){try{const s=await au(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Jt.set(this.auth._key(),e)}return this.bypassAuthState||Jt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function au(t,e){const n=lu(e),s=cu(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function ou(t,e){Jt.set(t._key(),e)}function cu(t){return Ce(t._redirectPersistence)}function lu(t){return Qt(ru,t.config.apiKey,t.name)}async function uu(t,e,n=!1){if(Ee(t.app))return Promise.reject(Be(t));const s=ht(t),r=Zl(s,e),a=await new iu(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}const du=600*1e3;class hu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fu(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ui(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ie(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=du&&this.cachedEventUids.clear(),this.cachedEventUids.has(sr(e))}saveEventToCache(e){this.cachedEventUids.add(sr(e)),this.lastProcessedEventTime=Date.now()}}function sr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ui({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function fu(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ui(t);default:return!1}}async function pu(t,e={}){return Ve(t,"GET","/v1/projects",e)}const mu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gu=/^https?/;async function yu(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pu(t);for(const n of e)try{if(bu(n))return}catch{}we(t,"unauthorized-domain")}function bu(t){const e=Qn(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!gu.test(n))return!1;if(mu.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const wu=new jt(3e4,6e4);function rr(){const t=Te().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xu(t){return new Promise((e,n)=>{function s(){rr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rr(),n(Ie(t,"network-request-failed"))},timeout:wu.get()})}if(Te().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Te().gapi?.load)s();else{const r=fl("iframefcb");return Te()[r]=()=>{gapi.load?s():n(Ie(t,"network-request-failed"))},Ii(`${hl()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Yt=null,e})}let Yt=null;function vu(t){return Yt=Yt||xu(t),Yt}const _u=new jt(5e3,15e3),Eu="__/auth/iframe",Iu="emulator/auth/iframe",Tu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Su=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cu(t){const e=t.config;O(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?us(e,Iu):`https://${t.config.authDomain}/${Eu}`,s={apiKey:e.apiKey,appName:t.name,v:Pt},r=Su.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Ot(s).slice(1)}`}async function Ru(t){const e=await vu(t),n=Te().gapi;return O(n,t,"internal-error"),e.open({where:document.body,url:Cu(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tu,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=Ie(t,"network-request-failed"),o=Te().setTimeout(()=>{i(a)},_u.get());function l(){Te().clearTimeout(o),r(s)}s.ping(l).then(l,()=>{i(a)})}))}const Nu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ku=500,Au=600,Ou="_blank",Pu="http://localhost";class ir{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ju(t,e,n,s=ku,r=Au){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const l={...Nu,width:s.toString(),height:r.toString(),top:i,left:a},u=de().toLowerCase();n&&(o=yi(u)?Ou:n),mi(u)&&(e=e||Pu,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[y,p])=>`${f}${y}=${p},`,"");if(sl(u)&&o!=="_self")return Du(e||"",o),new ir(null);const h=window.open(e||"",o,d);O(h,t,"popup-blocked");try{h.focus()}catch{}return new ir(h)}function Du(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const Mu="__/auth/handler",Fu="emulator/auth/handler",Lu=encodeURIComponent("fac");async function ar(t,e,n,s,r,i){O(t.config.authDomain,t,"auth-domain-config-required"),O(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Pt,eventId:r};if(e instanceof Ci){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Io(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))a[d]=h}if(e instanceof Dt){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${Lu}=${encodeURIComponent(l)}`:"";return`${Uu(t)}?${Ot(o).slice(1)}${u}`}function Uu({config:t}){return t.emulator?us(t,Fu):`https://${t.authDomain}/${Mu}`}const kn="webStorageSupport";class Bu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pi,this._completeRedirectFn=uu,this._overrideRedirectResult=ou}async _openPopup(e,n,s,r){ke(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ar(e,n,s,Qn(),r);return ju(e,i,ms())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ar(e,n,s,Qn(),r);return Vl(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ke(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Ru(e),s=new hu(e);return n.register("authEvent",r=>(O(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kn,{type:kn},r=>{const i=r?.[0]?.[kn];i!==void 0&&n(!!i),we(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yu(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _i()||gi()||hs()}}const $u=Bu;var or="@firebase/auth",cr="1.12.0";class Hu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vu(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wu(t){St(new lt("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=s.options;O(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ei(t)},u=new ll(s,r,i,l);return wl(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),St(new lt("auth-internal",e=>{const n=ht(e.getProvider("auth").getImmediate());return(s=>new Hu(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(or,cr,Vu(t)),rt(or,cr,"esm2020")}const zu=300,qu=Zr("authIdTokenMaxAge")||zu;let lr=null;const Gu=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>qu)return;const r=n?.token;lr!==r&&(lr=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Ku(t=Sc()){const e=si(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bl(t,{popupRedirectResolver:$u,persistence:[Xl,Bl,Pi]}),s=Zr("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=Gu(i.toString());Ml(n,a,()=>a(n.currentUser)),Dl(n,o=>a(o))}}const r=oo("auth");return r&&xl(n,`http://${r}`),n}function Qu(){return document.getElementsByTagName("head")?.[0]??document}ul({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ie("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Qu().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wu("Browser");var Ju="firebase",Yu="12.9.0";rt(Ju,Yu,"app");const Xu={apiKey:"AIzaSyAsRbgTwtA9ZIcLwMIEiWzosxkmgl5mwL8",authDomain:"ar-drone-ops-portal.firebaseapp.com",projectId:"ar-drone-ops-portal",storageBucket:"ar-drone-ops-portal.firebasestorage.app",messagingSenderId:"619795744900",appId:"1:619795744900:web:4050256b1a2dcfc3abdad1"},Zu=ri(Xu),Bi=Ku(Zu),ur=t=>{let e;const n=new Set,s=(u,d)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const f=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(y=>y(e,f))}},r=()=>e,o={setState:s,getState:r,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(s,r,o);return o},ed=(t=>t?ur(t):ur),td=t=>t;function nd(t,e=td){const n=Vt.useSyncExternalStore(t.subscribe,Vt.useCallback(()=>e(t.getState()),[t,e]),Vt.useCallback(()=>e(t.getInitialState()),[t,e]));return Vt.useDebugValue(n),n}const dr=t=>{const e=ed(t),n=s=>nd(e,s);return Object.assign(n,e),n},sd=(t=>t?dr(t):dr);function tt(t,e){try{const n=`thermal-viewer-image-${t}`;localStorage.setItem(n,JSON.stringify(e))}catch(n){console.warn("Failed to save image settings:",n)}}function hr(t){try{const e=`thermal-viewer-image-${t}`,n=localStorage.getItem(e);if(n)return JSON.parse(n)}catch(e){console.warn("Failed to load image settings:",e)}return null}const Re=sd(t=>({currentImage:null,thermalStats:null,viewMode:"overlay",colormap:"hot_iron",opacity:.6,minTemp:0,maxTemp:100,displayMinTemp:0,displayMaxTemp:100,markers:[],hoverTemp:null,zoom:1,panX:0,panY:0,thermalZoom:1,alignOffsetX:0,alignOffsetY:0,isLoading:!1,setCurrentImage:e=>t(n=>{if(n.currentImage&&tt(n.currentImage.id,{colormap:n.colormap,displayMinTemp:n.displayMinTemp,displayMaxTemp:n.displayMaxTemp,markers:n.markers}),e){const s=hr(e.id);if(s)return{currentImage:e,colormap:s.colormap,displayMinTemp:s.displayMinTemp,displayMaxTemp:s.displayMaxTemp,markers:s.markers}}return{currentImage:e,markers:[]}}),setThermalStats:e=>t(n=>{const s=n.currentImage&&hr(n.currentImage.id)!==null;return{thermalStats:e,minTemp:e?.minTemp??n.minTemp,maxTemp:e?.maxTemp??n.maxTemp,displayMinTemp:s?n.displayMinTemp:e?.minTemp??n.displayMinTemp,displayMaxTemp:s?n.displayMaxTemp:e?.maxTemp??n.displayMaxTemp}}),setViewMode:e=>t({viewMode:e}),setColormap:e=>t(n=>(n.currentImage&&tt(n.currentImage.id,{colormap:e,displayMinTemp:n.displayMinTemp,displayMaxTemp:n.displayMaxTemp,markers:n.markers}),{colormap:e})),setOpacity:e=>t({opacity:e}),setDisplayTempRange:(e,n)=>t(s=>(s.currentImage&&tt(s.currentImage.id,{colormap:s.colormap,displayMinTemp:e,displayMaxTemp:n,markers:s.markers}),{displayMinTemp:e,displayMaxTemp:n})),setTempRange:(e,n)=>t({minTemp:e,maxTemp:n}),addMarker:e=>t(n=>{const s=[...n.markers,e];return n.currentImage&&tt(n.currentImage.id,{colormap:n.colormap,displayMinTemp:n.displayMinTemp,displayMaxTemp:n.displayMaxTemp,markers:s}),{markers:s}}),removeMarker:e=>t(n=>{const s=n.markers.filter(r=>r.id!==e);return n.currentImage&&tt(n.currentImage.id,{colormap:n.colormap,displayMinTemp:n.displayMinTemp,displayMaxTemp:n.displayMaxTemp,markers:s}),{markers:s}}),clearMarkers:()=>t(e=>(e.currentImage&&tt(e.currentImage.id,{colormap:e.colormap,displayMinTemp:e.displayMinTemp,displayMaxTemp:e.displayMaxTemp,markers:[]}),{markers:[]})),setHoverTemp:e=>t({hoverTemp:e}),setZoom:e=>t({zoom:Math.max(.5,Math.min(5,e))}),setPan:(e,n)=>t({panX:e,panY:n}),resetView:()=>t({zoom:1,panX:0,panY:0}),setLoading:e=>t({isLoading:e}),setThermalZoom:e=>t({thermalZoom:Math.max(1,Math.min(8,e))}),setAlignOffset:(e,n)=>t({alignOffsetX:e,alignOffsetY:n})}));function $i(t,e){return function(){return t.apply(e,arguments)}}const{toString:rd}=Object.prototype,{getPrototypeOf:ys}=Object,{iterator:bn,toStringTag:Hi}=Symbol,wn=(t=>e=>{const n=rd.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xe=t=>(t=t.toLowerCase(),e=>wn(e)===t),xn=t=>e=>typeof e===t,{isArray:pt}=Array,dt=xn("undefined");function Ft(t){return t!==null&&!dt(t)&&t.constructor!==null&&!dt(t.constructor)&&pe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vi=xe("ArrayBuffer");function id(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vi(t.buffer),e}const ad=xn("string"),pe=xn("function"),Wi=xn("number"),Lt=t=>t!==null&&typeof t=="object",od=t=>t===!0||t===!1,Xt=t=>{if(wn(t)!=="object")return!1;const e=ys(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Hi in t)&&!(bn in t)},cd=t=>{if(!Lt(t)||Ft(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ld=xe("Date"),ud=xe("File"),dd=xe("Blob"),hd=xe("FileList"),fd=t=>Lt(t)&&pe(t.pipe),pd=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pe(t.append)&&((e=wn(t))==="formdata"||e==="object"&&pe(t.toString)&&t.toString()==="[object FormData]"))},md=xe("URLSearchParams"),[gd,yd,bd,wd]=["ReadableStream","Request","Response","Headers"].map(xe),xd=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ut(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),pt(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{if(Ft(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(s=0;s<a;s++)o=i[s],e.call(null,t[o],o,t)}}function zi(t,e){if(Ft(t))return null;e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const Ke=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qi=t=>!dt(t)&&t!==Ke;function Xn(){const{caseless:t,skipUndefined:e}=qi(this)&&this||{},n={},s=(r,i)=>{const a=t&&zi(n,i)||i;Xt(n[a])&&Xt(r)?n[a]=Xn(n[a],r):Xt(r)?n[a]=Xn({},r):pt(r)?n[a]=r.slice():(!e||!dt(r))&&(n[a]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ut(arguments[r],s);return n}const vd=(t,e,n,{allOwnKeys:s}={})=>(Ut(e,(r,i)=>{n&&pe(r)?Object.defineProperty(t,i,{value:$i(r,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,i,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),t),_d=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ed=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Id=(t,e,n,s)=>{let r,i,a;const o={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)a=r[i],(!s||s(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&ys(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Td=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},Sd=t=>{if(!t)return null;if(pt(t))return t;let e=t.length;if(!Wi(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Cd=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ys(Uint8Array)),Rd=(t,e)=>{const s=(t&&t[bn]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},Nd=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},kd=xe("HTMLFormElement"),Ad=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),fr=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Od=xe("RegExp"),Gi=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Ut(n,(r,i)=>{let a;(a=e(r,i,t))!==!1&&(s[i]=a||r)}),Object.defineProperties(t,s)},Pd=t=>{Gi(t,(e,n)=>{if(pe(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(pe(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jd=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return pt(t)?s(t):s(String(t).split(e)),n},Dd=()=>{},Md=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Fd(t){return!!(t&&pe(t.append)&&t[Hi]==="FormData"&&t[bn])}const Ld=t=>{const e=new Array(10),n=(s,r)=>{if(Lt(s)){if(e.indexOf(s)>=0)return;if(Ft(s))return s;if(!("toJSON"in s)){e[r]=s;const i=pt(s)?[]:{};return Ut(s,(a,o)=>{const l=n(a,r+1);!dt(l)&&(i[o]=l)}),e[r]=void 0,i}}return s};return n(t,0)},Ud=xe("AsyncFunction"),Bd=t=>t&&(Lt(t)||pe(t))&&pe(t.then)&&pe(t.catch),Ki=((t,e)=>t?setImmediate:e?((n,s)=>(Ke.addEventListener("message",({source:r,data:i})=>{r===Ke&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Ke.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pe(Ke.postMessage)),$d=typeof queueMicrotask<"u"?queueMicrotask.bind(Ke):typeof process<"u"&&process.nextTick||Ki,Hd=t=>t!=null&&pe(t[bn]),g={isArray:pt,isArrayBuffer:Vi,isBuffer:Ft,isFormData:pd,isArrayBufferView:id,isString:ad,isNumber:Wi,isBoolean:od,isObject:Lt,isPlainObject:Xt,isEmptyObject:cd,isReadableStream:gd,isRequest:yd,isResponse:bd,isHeaders:wd,isUndefined:dt,isDate:ld,isFile:ud,isBlob:dd,isRegExp:Od,isFunction:pe,isStream:fd,isURLSearchParams:md,isTypedArray:Cd,isFileList:hd,forEach:Ut,merge:Xn,extend:vd,trim:xd,stripBOM:_d,inherits:Ed,toFlatObject:Id,kindOf:wn,kindOfTest:xe,endsWith:Td,toArray:Sd,forEachEntry:Rd,matchAll:Nd,isHTMLForm:kd,hasOwnProperty:fr,hasOwnProp:fr,reduceDescriptors:Gi,freezeMethods:Pd,toObjectSet:jd,toCamelCase:Ad,noop:Dd,toFiniteNumber:Md,findKey:zi,global:Ke,isContextDefined:qi,isSpecCompliantForm:Fd,toJSONObject:Ld,isAsyncFn:Ud,isThenable:Bd,setImmediate:Ki,asap:$d,isIterable:Hd};let j=class Qi extends Error{static from(e,n,s,r,i,a){const o=new Qi(e.message,n||e.code,s,r,i);return o.cause=e,o.name=e.name,a&&Object.assign(o,a),o}constructor(e,n,s,r,i){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),s&&(this.config=s),r&&(this.request=r),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.status}}};j.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";j.ERR_BAD_OPTION="ERR_BAD_OPTION";j.ECONNABORTED="ECONNABORTED";j.ETIMEDOUT="ETIMEDOUT";j.ERR_NETWORK="ERR_NETWORK";j.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";j.ERR_DEPRECATED="ERR_DEPRECATED";j.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";j.ERR_BAD_REQUEST="ERR_BAD_REQUEST";j.ERR_CANCELED="ERR_CANCELED";j.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";j.ERR_INVALID_URL="ERR_INVALID_URL";const Vd=null;function Zn(t){return g.isPlainObject(t)||g.isArray(t)}function Ji(t){return g.endsWith(t,"[]")?t.slice(0,-2):t}function pr(t,e,n){return t?t.concat(e).map(function(r,i){return r=Ji(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function Wd(t){return g.isArray(t)&&!t.some(Zn)}const zd=g.toFlatObject(g,{},null,function(e){return/^is[A-Z]/.test(e)});function vn(t,e,n){if(!g.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=g.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,m){return!g.isUndefined(m[w])});const s=n.metaTokens,r=n.visitor||d,i=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&g.isSpecCompliantForm(e);if(!g.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(g.isDate(p))return p.toISOString();if(g.isBoolean(p))return p.toString();if(!l&&g.isBlob(p))throw new j("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(p)||g.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,w,m){let C=p;if(p&&!m&&typeof p=="object"){if(g.endsWith(w,"{}"))w=s?w:w.slice(0,-2),p=JSON.stringify(p);else if(g.isArray(p)&&Wd(p)||(g.isFileList(p)||g.endsWith(w,"[]"))&&(C=g.toArray(p)))return w=Ji(w),C.forEach(function(v,E){!(g.isUndefined(v)||v===null)&&e.append(a===!0?pr([w],E,i):a===null?w:w+"[]",u(v))}),!1}return Zn(p)?!0:(e.append(pr(m,w,i),u(p)),!1)}const h=[],f=Object.assign(zd,{defaultVisitor:d,convertValue:u,isVisitable:Zn});function y(p,w){if(!g.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(p),g.forEach(p,function(C,T){(!(g.isUndefined(C)||C===null)&&r.call(e,C,g.isString(T)?T.trim():T,w,f))===!0&&y(C,w?w.concat(T):[T])}),h.pop()}}if(!g.isObject(t))throw new TypeError("data must be an object");return y(t),e}function mr(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function bs(t,e){this._pairs=[],t&&vn(t,this,e)}const Yi=bs.prototype;Yi.append=function(e,n){this._pairs.push([e,n])};Yi.toString=function(e){const n=e?function(s){return e.call(this,s,mr)}:mr;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function qd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Xi(t,e,n){if(!e)return t;const s=n&&n.encode||qd,r=g.isFunction(n)?{serialize:n}:n,i=r&&r.serialize;let a;if(i?a=i(e,r):a=g.isURLSearchParams(e)?e.toString():new bs(e,r).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class gr{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){g.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Zi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gd=typeof URLSearchParams<"u"?URLSearchParams:bs,Kd=typeof FormData<"u"?FormData:null,Qd=typeof Blob<"u"?Blob:null,Jd={isBrowser:!0,classes:{URLSearchParams:Gd,FormData:Kd,Blob:Qd},protocols:["http","https","file","blob","url","data"]},ws=typeof window<"u"&&typeof document<"u",es=typeof navigator=="object"&&navigator||void 0,Yd=ws&&(!es||["ReactNative","NativeScript","NS"].indexOf(es.product)<0),Xd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zd=ws&&window.location.href||"http://localhost",eh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ws,hasStandardBrowserEnv:Yd,hasStandardBrowserWebWorkerEnv:Xd,navigator:es,origin:Zd},Symbol.toStringTag,{value:"Module"})),le={...eh,...Jd};function th(t,e){return vn(t,new le.classes.URLSearchParams,{visitor:function(n,s,r,i){return le.isNode&&g.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function nh(t){return g.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function sh(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function ea(t){function e(n,s,r,i){let a=n[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=n.length;return a=!a&&g.isArray(r)?r.length:a,l?(g.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!o):((!r[a]||!g.isObject(r[a]))&&(r[a]=[]),e(n,s,r[a],i)&&g.isArray(r[a])&&(r[a]=sh(r[a])),!o)}if(g.isFormData(t)&&g.isFunction(t.entries)){const n={};return g.forEachEntry(t,(s,r)=>{e(nh(s),r,n,0)}),n}return null}function rh(t,e,n){if(g.isString(t))try{return(e||JSON.parse)(t),g.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Bt={transitional:Zi,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=g.isObject(e);if(i&&g.isHTMLForm(e)&&(e=new FormData(e)),g.isFormData(e))return r?JSON.stringify(ea(e)):e;if(g.isArrayBuffer(e)||g.isBuffer(e)||g.isStream(e)||g.isFile(e)||g.isBlob(e)||g.isReadableStream(e))return e;if(g.isArrayBufferView(e))return e.buffer;if(g.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return th(e,this.formSerializer).toString();if((o=g.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return vn(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),rh(e)):e}],transformResponse:[function(e){const n=this.transitional||Bt.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(g.isResponse(e)||g.isReadableStream(e))return e;if(e&&g.isString(e)&&(s&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?j.from(o,j.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};g.forEach(["delete","get","head","post","put","patch"],t=>{Bt.headers[t]={}});const ih=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ah=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!n||e[n]&&ih[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},yr=Symbol("internals");function bt(t){return t&&String(t).trim().toLowerCase()}function Zt(t){return t===!1||t==null?t:g.isArray(t)?t.map(Zt):String(t)}function oh(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const ch=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function An(t,e,n,s,r){if(g.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!g.isString(e)){if(g.isString(s))return e.indexOf(s)!==-1;if(g.isRegExp(s))return s.test(e)}}function lh(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function uh(t,e){const n=g.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,a){return this[s].call(this,e,r,i,a)},configurable:!0})})}let me=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(o,l,u){const d=bt(l);if(!d)throw new Error("header name must be a non-empty string");const h=g.findKey(r,d);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||l]=Zt(o))}const a=(o,l)=>g.forEach(o,(u,d)=>i(u,d,l));if(g.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(g.isString(e)&&(e=e.trim())&&!ch(e))a(ah(e),n);else if(g.isObject(e)&&g.isIterable(e)){let o={},l,u;for(const d of e){if(!g.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(l=o[u])?g.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}a(o,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=bt(e),e){const s=g.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return oh(r);if(g.isFunction(n))return n.call(this,r,s);if(g.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=bt(e),e){const s=g.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||An(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(a){if(a=bt(a),a){const o=g.findKey(s,a);o&&(!n||An(s,s[o],o,n))&&(delete s[o],r=!0)}}return g.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||An(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return g.forEach(this,(r,i)=>{const a=g.findKey(s,i);if(a){n[a]=Zt(r),delete n[i];return}const o=e?lh(i):String(i).trim();o!==i&&delete n[i],n[o]=Zt(r),s[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return g.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&g.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[yr]=this[yr]={accessors:{}}).accessors,r=this.prototype;function i(a){const o=bt(a);s[o]||(uh(r,a),s[o]=!0)}return g.isArray(e)?e.forEach(i):i(e),this}};me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);g.reduceDescriptors(me.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});g.freezeMethods(me);function On(t,e){const n=this||Bt,s=e||n,r=me.from(s.headers);let i=s.data;return g.forEach(t,function(o){i=o.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function ta(t){return!!(t&&t.__CANCEL__)}let $t=class extends j{constructor(e,n,s){super(e??"canceled",j.ERR_CANCELED,n,s),this.name="CanceledError",this.__CANCEL__=!0}};function na(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new j("Request failed with status code "+n.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function dh(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hh(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=s[i];a||(a=u),n[r]=l,s[r]=u;let h=i,f=0;for(;h!==r;)f+=n[h++],h=h%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),u-a<e)return;const y=d&&u-d;return y?Math.round(f*1e3/y):void 0}}function fh(t,e){let n=0,s=1e3/e,r,i;const a=(u,d=Date.now())=>{n=d,r=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=s?a(u,d):(r=u,i||(i=setTimeout(()=>{i=null,a(r)},s-h)))},()=>r&&a(r)]}const hn=(t,e,n=3)=>{let s=0;const r=hh(50,250);return fh(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-s,u=r(l),d=a<=o;s=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&d?(o-a)/u:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},n)},br=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},wr=t=>(...e)=>g.asap(()=>t(...e)),ph=le.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,le.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,mh=le.hasStandardBrowserEnv?{write(t,e,n,s,r,i,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];g.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),g.isString(s)&&o.push(`path=${s}`),g.isString(r)&&o.push(`domain=${r}`),i===!0&&o.push("secure"),g.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function gh(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yh(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sa(t,e,n){let s=!gh(e);return t&&(s||n==!1)?yh(t,e):e}const xr=t=>t instanceof me?{...t}:t;function Xe(t,e){e=e||{};const n={};function s(u,d,h,f){return g.isPlainObject(u)&&g.isPlainObject(d)?g.merge.call({caseless:f},u,d):g.isPlainObject(d)?g.merge({},d):g.isArray(d)?d.slice():d}function r(u,d,h,f){if(g.isUndefined(d)){if(!g.isUndefined(u))return s(void 0,u,h,f)}else return s(u,d,h,f)}function i(u,d){if(!g.isUndefined(d))return s(void 0,d)}function a(u,d){if(g.isUndefined(d)){if(!g.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function o(u,d,h){if(h in e)return s(u,d);if(h in t)return s(void 0,u)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d,h)=>r(xr(u),xr(d),h,!0)};return g.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||r,f=h(t[d],e[d],d);g.isUndefined(f)&&h!==o||(n[d]=f)}),n}const ra=t=>{const e=Xe({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:o}=e;if(e.headers=a=me.from(a),e.url=Xi(sa(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),g.isFormData(n)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(g.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&a.set(d,h)})}}if(le.hasStandardBrowserEnv&&(s&&g.isFunction(s)&&(s=s(e)),s||s!==!1&&ph(e.url))){const l=r&&i&&mh.read(i);l&&a.set(r,l)}return e},bh=typeof XMLHttpRequest<"u",wh=bh&&function(t){return new Promise(function(n,s){const r=ra(t);let i=r.data;const a=me.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=r,d,h,f,y,p;function w(){y&&y(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function C(){if(!m)return;const v=me.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),D={data:!o||o==="text"||o==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:v,config:t,request:m};na(function(k){n(k),w()},function(k){s(k),w()},D),m=null}"onloadend"in m?m.onloadend=C:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(C)},m.onabort=function(){m&&(s(new j("Request aborted",j.ECONNABORTED,t,m)),m=null)},m.onerror=function(E){const D=E&&E.message?E.message:"Network Error",L=new j(D,j.ERR_NETWORK,t,m);L.event=E||null,s(L),m=null},m.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||Zi;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new j(E,D.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,m)),m=null},i===void 0&&a.setContentType(null),"setRequestHeader"in m&&g.forEach(a.toJSON(),function(E,D){m.setRequestHeader(D,E)}),g.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),o&&o!=="json"&&(m.responseType=r.responseType),u&&([f,p]=hn(u,!0),m.addEventListener("progress",f)),l&&m.upload&&([h,y]=hn(l),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(d=v=>{m&&(s(!v||v.type?new $t(null,t,m):v),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const T=dh(r.url);if(T&&le.protocols.indexOf(T)===-1){s(new j("Unsupported protocol "+T+":",j.ERR_BAD_REQUEST,t));return}m.send(i||null)})},xh=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,o();const d=u instanceof Error?u:this.reason;s.abort(d instanceof j?d:new $t(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new j(`timeout of ${e}ms exceeded`,j.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>g.asap(o),l}},vh=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},_h=async function*(t,e){for await(const n of Eh(t))yield*vh(n,e)},Eh=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},vr=(t,e,n,s)=>{const r=_h(t,e);let i=0,a,o=l=>{a||(a=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await r.next();if(u){o(),l.close();return}let h=d.byteLength;if(n){let f=i+=h;n(f)}l.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},_r=64*1024,{isFunction:qt}=g,Ih=(({Request:t,Response:e})=>({Request:t,Response:e}))(g.global),{ReadableStream:Er,TextEncoder:Ir}=g.global,Tr=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Th=t=>{t=g.merge.call({skipUndefined:!0},Ih,t);const{fetch:e,Request:n,Response:s}=t,r=e?qt(e):typeof fetch=="function",i=qt(n),a=qt(s);if(!r)return!1;const o=r&&qt(Er),l=r&&(typeof Ir=="function"?(p=>w=>p.encode(w))(new Ir):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=i&&o&&Tr(()=>{let p=!1;const w=new n(le.origin,{body:new Er,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!w}),d=a&&o&&Tr(()=>g.isReadableStream(new s("").body)),h={stream:d&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(w,m)=>{let C=w&&w[p];if(C)return C.call(w);throw new j(`Response type '${p}' is not supported`,j.ERR_NOT_SUPPORT,m)})});const f=async p=>{if(p==null)return 0;if(g.isBlob(p))return p.size;if(g.isSpecCompliantForm(p))return(await new n(le.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(g.isArrayBufferView(p)||g.isArrayBuffer(p))return p.byteLength;if(g.isURLSearchParams(p)&&(p=p+""),g.isString(p))return(await l(p)).byteLength},y=async(p,w)=>{const m=g.toFiniteNumber(p.getContentLength());return m??f(w)};return async p=>{let{url:w,method:m,data:C,signal:T,cancelToken:v,timeout:E,onDownloadProgress:D,onUploadProgress:L,responseType:k,headers:R,withCredentials:_="same-origin",fetchOptions:A}=ra(p),N=e||fetch;k=k?(k+"").toLowerCase():"text";let I=xh([T,v&&v.toAbortSignal()],E),U=null;const b=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let F;try{if(L&&u&&m!=="get"&&m!=="head"&&(F=await y(R,C))!==0){let ie=new n(w,{method:"POST",body:C,duplex:"half"}),B;if(g.isFormData(C)&&(B=ie.headers.get("content-type"))&&R.setContentType(B),ie.body){const[S,Q]=br(F,hn(wr(L)));C=vr(ie.body,_r,S,Q)}}g.isString(_)||(_=_?"include":"omit");const V=i&&"credentials"in n.prototype,ue={...A,signal:I,method:m.toUpperCase(),headers:R.normalize().toJSON(),body:C,duplex:"half",credentials:V?_:void 0};U=i&&new n(w,ue);let Z=await(i?N(U,A):N(w,ue));const ge=d&&(k==="stream"||k==="response");if(d&&(D||ge&&b)){const ie={};["status","statusText","headers"].forEach(H=>{ie[H]=Z[H]});const B=g.toFiniteNumber(Z.headers.get("content-length")),[S,Q]=D&&br(B,hn(wr(D),!0))||[];Z=new s(vr(Z.body,_r,S,()=>{Q&&Q(),b&&b()}),ie)}k=k||"text";let We=await h[g.findKey(h,k)||"text"](Z,p);return!ge&&b&&b(),await new Promise((ie,B)=>{na(ie,B,{data:We,headers:me.from(Z.headers),status:Z.status,statusText:Z.statusText,config:p,request:U})})}catch(V){throw b&&b(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new j("Network Error",j.ERR_NETWORK,p,U),{cause:V.cause||V}):j.from(V,V&&V.code,p,U)}}},Sh=new Map,ia=t=>{let e=t&&t.env||{};const{fetch:n,Request:s,Response:r}=e,i=[s,r,n];let a=i.length,o=a,l,u,d=Sh;for(;o--;)l=i[o],u=d.get(l),u===void 0&&d.set(l,u=o?new Map:Th(e)),d=u;return u};ia();const xs={http:Vd,xhr:wh,fetch:{get:ia}};g.forEach(xs,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Sr=t=>`- ${t}`,Ch=t=>g.isFunction(t)||t===null||t===!1;function Rh(t,e){t=g.isArray(t)?t:[t];const{length:n}=t;let s,r;const i={};for(let a=0;a<n;a++){s=t[a];let o;if(r=s,!Ch(s)&&(r=xs[(o=String(s)).toLowerCase()],r===void 0))throw new j(`Unknown adapter '${o}'`);if(r&&(g.isFunction(r)||(r=r.get(e))))break;i[o||"#"+a]=r}if(!r){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=n?a.length>1?`since :
`+a.map(Sr).join(`
`):" "+Sr(a[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const aa={getAdapter:Rh,adapters:xs};function Pn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $t(null,t)}function Cr(t){return Pn(t),t.headers=me.from(t.headers),t.data=On.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aa.getAdapter(t.adapter||Bt.adapter,t)(t).then(function(s){return Pn(t),s.data=On.call(t,t.transformResponse,s),s.headers=me.from(s.headers),s},function(s){return ta(s)||(Pn(t),s&&s.response&&(s.response.data=On.call(t,t.transformResponse,s.response),s.response.headers=me.from(s.response.headers))),Promise.reject(s)})}const oa="1.13.4",_n={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{_n[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const Rr={};_n.transitional=function(e,n,s){function r(i,a){return"[Axios v"+oa+"] Transitional option '"+i+"'"+a+(s?". "+s:"")}return(i,a,o)=>{if(e===!1)throw new j(r(a," has been removed"+(n?" in "+n:"")),j.ERR_DEPRECATED);return n&&!Rr[a]&&(Rr[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,o):!0}};_n.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Nh(t,e,n){if(typeof t!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],a=e[i];if(a){const o=t[i],l=o===void 0||a(o,i,t);if(l!==!0)throw new j("option "+i+" must be "+l,j.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new j("Unknown option "+i,j.ERR_BAD_OPTION)}}const en={assertOptions:Nh,validators:_n},ve=en.validators;let Qe=class{constructor(e){this.defaults=e||{},this.interceptors={request:new gr,response:new gr}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xe(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&en.assertOptions(s,{silentJSONParsing:ve.transitional(ve.boolean),forcedJSONParsing:ve.transitional(ve.boolean),clarifyTimeoutError:ve.transitional(ve.boolean)},!1),r!=null&&(g.isFunction(r)?n.paramsSerializer={serialize:r}:en.assertOptions(r,{encode:ve.function,serialize:ve.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),en.assertOptions(n,{baseUrl:ve.spelling("baseURL"),withXsrfToken:ve.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&g.merge(i.common,i[n.method]);i&&g.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=me.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,h=0,f;if(!l){const p=[Cr.bind(this),void 0];for(p.unshift(...o),p.push(...u),f=p.length,d=Promise.resolve(n);h<f;)d=d.then(p[h++],p[h++]);return d}f=o.length;let y=n;for(;h<f;){const p=o[h++],w=o[h++];try{y=p(y)}catch(m){w.call(this,m);break}}try{d=Cr.call(this,y)}catch(p){return Promise.reject(p)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Xe(this.defaults,e);const n=sa(e.baseURL,e.url,e.allowAbsoluteUrls);return Xi(n,e.params,e.paramsSerializer)}};g.forEach(["delete","get","head","options"],function(e){Qe.prototype[e]=function(n,s){return this.request(Xe(s||{},{method:e,url:n,data:(s||{}).data}))}});g.forEach(["post","put","patch"],function(e){function n(s){return function(i,a,o){return this.request(Xe(o||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Qe.prototype[e]=n(),Qe.prototype[e+"Form"]=n(!0)});let kh=class ca{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(o=>{s.subscribe(o),i=o}).then(r);return a.cancel=function(){s.unsubscribe(i)},a},e(function(i,a,o){s.reason||(s.reason=new $t(i,a,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new ca(function(r){e=r}),cancel:e}}};function Ah(t){return function(n){return t.apply(null,n)}}function Oh(t){return g.isObject(t)&&t.isAxiosError===!0}const ts={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ts).forEach(([t,e])=>{ts[e]=t});function la(t){const e=new Qe(t),n=$i(Qe.prototype.request,e);return g.extend(n,Qe.prototype,e,{allOwnKeys:!0}),g.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return la(Xe(t,r))},n}const se=la(Bt);se.Axios=Qe;se.CanceledError=$t;se.CancelToken=kh;se.isCancel=ta;se.VERSION=oa;se.toFormData=vn;se.AxiosError=j;se.Cancel=se.CanceledError;se.all=function(e){return Promise.all(e)};se.spread=Ah;se.isAxiosError=Oh;se.mergeConfig=Xe;se.AxiosHeaders=me;se.formToJSON=t=>ea(g.isHTMLForm(t)?new FormData(t):t);se.getAdapter=aa.getAdapter;se.HttpStatusCode=ts;se.default=se;const{Axios:$f,AxiosError:Hf,CanceledError:Vf,isCancel:Wf,CancelToken:zf,VERSION:qf,all:Gf,Cancel:Kf,isAxiosError:Qf,spread:Jf,toFormData:Yf,AxiosHeaders:Xf,HttpStatusCode:Zf,formToJSON:ep,getAdapter:tp,mergeConfig:np}=se;function Ph(t,e){const n=t.length,s=e/255*(n-1),r=Math.floor(s),i=Math.min(r+1,n-1),a=s-r;return[Math.round(t[r][0]+a*(t[i][0]-t[r][0])),Math.round(t[r][1]+a*(t[i][1]-t[r][1])),Math.round(t[r][2]+a*(t[i][2]-t[r][2]))]}function nt(t){return Array.from({length:256},(e,n)=>[...Ph(t,n)])}const Nr={white_hot:Array.from({length:256},(t,e)=>[e,e,e]),black_hot:Array.from({length:256},(t,e)=>[255-e,255-e,255-e]),hot_iron:nt([[0,0,0],[51,0,102],[102,0,153],[153,0,102],[204,51,0],[255,102,0],[255,204,51],[255,255,255]]),iron_red:nt([[0,0,10],[30,10,60],[75,8,104],[125,17,119],[174,30,84],[217,50,22],[245,109,0],[255,169,0],[255,229,102],[255,255,255]]),fulgurite:nt([[51,0,0],[102,0,0],[153,51,0],[204,102,0],[255,153,51],[255,204,102],[255,255,153],[255,255,255]]),medical:nt([[0,0,51],[51,0,102],[102,0,153],[153,0,204],[204,0,255],[255,102,255],[255,204,255],[255,255,255]]),arctic:nt([[0,0,102],[0,51,204],[0,153,255],[102,204,255],[204,255,255],[255,255,255]]),rainbow:nt([[0,0,255],[0,255,255],[0,255,0],[255,255,0],[255,0,0]]),tint:(()=>{const t=[];for(let e=0;e<256;e++)if(e<200){const n=Math.round(e/200*180);t.push([n,n,n])}else{const n=(e-200)/55;t.push([Math.round(180+n*75),Math.round(180*(1-n*.8)),Math.round(180*(1-n*.8))])}return t})()},kr=new Map;async function et(t,e){const n=kr.get(t);if(n)return n;const s=`${e}/thermal/${t}.bin.gz`,r=await fetch(s);if(!r.ok)throw new Error(`Failed to load thermal data: ${r.status}`);const i=await r.blob(),a=new DecompressionStream("gzip"),l=i.stream().pipeThrough(a).getReader(),u=[];let d=0;for(;;){const{done:R,value:_}=await l.read();if(R)break;u.push(_),d+=_.byteLength}const h=new Uint8Array(d);let f=0;for(const R of u)h.set(R,f),f+=R.byteLength;const y=new Float32Array(h.buffer),p=y.length;let w=640,m=512;const C=[[512,640],[256,336],[480,640],[384,512]];for(const[R,_]of C)if(R*_===p){w=_,m=R;break}let T=1/0,v=-1/0,E=0;for(let R=0;R<y.length;R++){const _=y[R];_<T&&(T=_),_>v&&(v=_),E+=_}const D=E/y.length,k={data:y,width:w,height:m,stats:{minTemp:T,maxTemp:v,meanTemp:D,width:w,height:m}};return kr.set(t,k),k}function En(t,e,n,s){const{data:r,width:i,height:a}=t,o=new ImageData(i,a),l=Nr[e]||Nr.hot_iron,u=s-n;for(let d=0;d<r.length;d++){const h=Math.max(0,Math.min(1,(r[d]-n)/(u+1e-6))),f=Math.round(h*255),[y,p,w]=l[f],m=d*4;o.data[m]=y,o.data[m+1]=p,o.data[m+2]=w,o.data[m+3]=255}return o}function tn(t,e,n){const s=n*t.width+e,r=t.data[s],i=(r-32)*5/9;return{tempFahrenheit:r,tempCelsius:i}}function jh(t){const{data:e,width:n,height:s}=t,r=[];r.push(`# Thermal data (Fahrenheit), ${n}x${s}`),r.push(Array.from({length:n},(i,a)=>`col_${a}`).join(","));for(let i=0;i<s;i++){const a=[];for(let o=0;o<n;o++)a.push(e[i*n+o].toFixed(2));r.push(a.join(","))}return r.join(`
`)}const Dh="/thermal-viewer-web/data";let ce=Dh;function Mh(t){ce=t,vt=null}let vt=null;async function mt(){if(vt)return vt;const t=`${ce}/manifest.json`,e=await fetch(t);if(!e.ok)throw new Error(`Failed to load manifest: ${e.status} from ${t}`);return vt=await e.json(),vt}function Fh(t){return{id:t.id,thermalPath:`${ce}/thermal/${t.id}.bin.gz`,visiblePath:t.hasVisible?`${ce}/visible/${t.id}.jpg`:"",thermalTiffPath:"",timestamp:t.timestamp,flightGroup:t.flightGroup,filename:t.filename,gps:t.gps,gimbalYaw:t.gimbalYaw,gimbalPitch:t.gimbalPitch,relativeAltitude:t.relativeAltitude}}async function Lh(){const t=await mt();return{images:t.images.map(Fh),totalCount:t.totalCount,flightGroups:t.flightGroups,photoGroups:t.photoGroups}}async function Uh(t){const n=(await mt()).images.find(r=>r.id===t);return n?n.stats:(await et(t,ce)).stats}function Bh(t){return`${ce}/thumbnails/${t}.jpg`}function $h(t,e,n,s){return`${ce}/visible/${t}.jpg`}async function Hh(t){return et(t,ce)}async function Vh(t,e,n){const s=await et(t,ce),{tempCelsius:r,tempFahrenheit:i}=tn(s,e,n);return{x:e,y:n,tempCelsius:r,tempFahrenheit:i}}async function Wh(t){const e=await et(t,ce),n=jh(e);return new Blob([n],{type:"text/csv"})}function vs(t,e,n,s){const r=En(t,e,n,s),i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").putImageData(r,0,0),i}function zh(t,e,n,s,r,i,a,o){const l=o-30,u={data:new Float32Array(Array.from({length:256},(f,y)=>n+y/255*(s-n))),width:256,height:1},d=En(u,e,n,s),h=document.createElement("canvas");h.width=256,h.height=1,h.getContext("2d").putImageData(d,0,0),t.save(),t.translate(r,i+l),t.rotate(-Math.PI/2),t.drawImage(h,0,0,256,1,0,0,l,a),t.restore(),t.fillStyle="#ffffff",t.font="bold 11px sans-serif",t.textAlign="center",t.fillText(`${s.toFixed(1)}F`,r+a/2,i-2),t.fillText(`${n.toFixed(1)}F`,r+a/2,i+o)}function ua(t,e,n,s,r){e.forEach(i=>{const a=s+i.x*n,o=r+i.y*n;t.strokeStyle="#ffff00",t.lineWidth=2,t.beginPath(),t.moveTo(a-8,o),t.lineTo(a+8,o),t.moveTo(a,o-8),t.lineTo(a,o+8),t.stroke();const l=`${i.tempF.toFixed(1)}F`;t.font="bold 11px sans-serif";const u=t.measureText(l).width;t.fillStyle="rgba(0,0,0,0.8)",t.fillRect(a+6,o-8,u+6,16),t.fillStyle="#ffff00",t.fillText(l,a+9,o+4)})}async function qh(t,e){const n=await et(t,ce),s=e.colormap||"hot_iron",r=e.minTemp??n.stats.minTemp,i=e.maxTemp??n.stats.maxTemp,a=vs(n,s,r,i),o=50,l=10,u=n.width+o+l,d=n.height,h=document.createElement("canvas");h.width=u,h.height=d;const f=h.getContext("2d");return f.fillStyle="#0a0a0a",f.fillRect(0,0,u,d),f.drawImage(a,0,0),zh(f,s,r,i,n.width+l,20,30,d-40),e.includeAnnotations&&e.markers&&e.markers.length>0&&ua(f,e.markers,1,0,0),new Promise((y,p)=>{h.toBlob(w=>w?y(w):p(new Error("Canvas export failed")),"image/png")})}function da(t){return new Promise((e,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>e(s),s.onerror=n,s.src=t})}async function Gh(t,e){const n=(await ns(async()=>{const{default:E}=await import("./gif-CnEmu0W2.js").then(D=>D.g);return{default:E}},__vite__mapDeps([0,1,2]))).default,s=await et(t,ce),r=e.colormap||"hot_iron",i=e.minTemp??s.stats.minTemp,a=e.maxTemp??s.stats.maxTemp,o=Math.min(e.fps,10),l=12,u=vs(s,r,i,a),d=Math.round(s.width/2),h=Math.round(s.height/2),f=`${ce}/visible/${t}.jpg`;let y=null;try{y=await da(f)}catch{}const p=new n({workers:2,quality:15,width:d,height:h,workerScript:"/thermal-viewer-web/gif.worker.js"}),w=document.createElement("canvas");w.width=d,w.height=h;const m=w.getContext("2d"),C=[];for(let E=0;E<l;E++){const D=E/(l-1);m.clearRect(0,0,d,h),y?(m.globalAlpha=1,m.drawImage(y,0,0,d,h),m.globalAlpha=D,m.drawImage(u,0,0,d,h),m.globalAlpha=1):m.drawImage(u,0,0,d,h),C.push(m.getImageData(0,0,d,h))}const T=Math.round(1e3/o),v=500;m.putImageData(C[0],0,0),p.addFrame(m,{copy:!0,delay:v});for(let E=1;E<l;E++)m.putImageData(C[E],0,0),p.addFrame(m,{copy:!0,delay:T});m.putImageData(C[l-1],0,0),p.addFrame(m,{copy:!0,delay:v});for(let E=l-2;E>0;E--)m.putImageData(C[E],0,0),p.addFrame(m,{copy:!0,delay:T});return new Promise(E=>{p.on("finished",D=>E(D)),p.render()})}async function Kh(t){const{jsPDF:e}=await ns(async()=>{const{jsPDF:a}=await import("./jspdf.es.min-BDRmAi6a.js").then(o=>o.j);return{jsPDF:a}},__vite__mapDeps([3,1,2])),n=await mt(),s=new e({orientation:"landscape",unit:"mm",format:"letter"}),r=s.internal.pageSize.getWidth(),i=s.internal.pageSize.getHeight();for(let a=0;a<t.images.length;a++){const o=t.images[a];a>0&&s.addPage("letter","landscape");const l=await et(o.imageId,ce),u=n.images.find(k=>k.id===o.imageId),d=o.colormap||"hot_iron",h=o.minTemp??l.stats.minTemp,f=o.maxTemp??l.stats.maxTemp;s.setFillColor(26,26,26),s.rect(0,0,r,i,"F"),s.setFontSize(16),s.setTextColor(255,102,0),s.text("AR Drone Ops  Thermal Inspection Report",10,12),s.setFontSize(9),s.setTextColor(180,180,180),s.text(`Image: ${u?.filename||o.imageId}`,10,19),s.text(`Date: ${u?.timestamp?new Date(u.timestamp).toLocaleString():"N/A"}`,10,24);let y=29;if(u?.gps&&(s.text(`GPS: ${u.gps.lat.toFixed(6)}, ${u.gps.lon.toFixed(6)}`,10,y),y+=5),u?.gimbalYaw!=null){const R=["N","NE","E","SE","S","SW","W","NW"][Math.round((u.gimbalYaw%360+360)%360/45)%8];s.text(`Direction: ${R} (${u.gimbalYaw.toFixed(0)})`,10,y),y+=5}u?.relativeAltitude!=null&&(s.text(`Altitude: ${(u.relativeAltitude*3.281).toFixed(0)} ft`,10,y),y+=5),s.setTextColor(255,102,0),s.text("Temperature Statistics:",10,y+2),s.setTextColor(200,200,200),y+=7,s.text(`Min: ${l.stats.minTemp.toFixed(1)}F`,10,y),s.text(`Max: ${l.stats.maxTemp.toFixed(1)}F`,50,y),s.text(`Mean: ${l.stats.meanTemp.toFixed(1)}F`,90,y);const p=vs(l,d,h,f);if(o.markers&&o.markers.length>0){const k=p.getContext("2d");ua(k,o.markers,1,0,0)}const w=p.toDataURL("image/jpeg",.92),m=y+8,C=i-m-8,T=l.width/l.height;let v,E;const D=t.sideBySide&&u?.hasVisible,L=D?(r-30)/2:r-20;if(T>L/C?(v=L,E=v/T):(E=C,v=E*T),s.addImage(w,"JPEG",10,m,v,E),D)try{const k=await da(`${ce}/visible/${o.imageId}.jpg`),R=document.createElement("canvas");R.width=k.width,R.height=k.height,R.getContext("2d").drawImage(k,0,0);const _=R.toDataURL("image/jpeg",.92);s.addImage(_,"JPEG",10+v+10,m,v,E)}catch{}{const k=r-18,R=m,_=6,A=E,N=50;for(let I=0;I<N;I++){const U=I/N,b=f-U*(f-h),F={data:new Float32Array([b]),width:1,height:1},V=En(F,d,h,f);s.setFillColor(V.data[0],V.data[1],V.data[2]),s.rect(k,R+U*A,_,A/N+.5,"F")}s.setFontSize(7),s.setTextColor(255,255,255),s.text(`${f.toFixed(1)}F`,k,R-1),s.text(`${h.toFixed(1)}F`,k,R+A+4)}s.setFontSize(7),s.setTextColor(100,100,100),s.text("Generated by AR Drone Ops Thermal Viewer",10,i-3),s.text(`Page ${a+1} of ${t.images.length}`,r-40,i-3)}return s.output("blob")}async function Qh(){return(await mt()).mapData??null}async function Jh(){const t=await mt();return t.model3D?{...t.model3D,url:`${ce}/${t.model3D.url}`}:null}async function Yh(){const t=await mt();return t.orthophoto?{...t.orthophoto,url:`${ce}/${t.orthophoto.url}`}:null}const jn=!0,Xh="/api";se.create({baseURL:Xh,timeout:3e4});async function Zh(t){return Lh()}async function ef(t){return Uh(t)}function tf(t,e=2,n=0,s=0){return $h(t)}function ha(t){return Bh(t)}async function Dn(t,e,n){return Vh(t,e,n)}async function nf(t,e){return qh(t,e)}async function sf(t,e){return Gh(t,e)}async function rf(t){return Wh(t)}async function af(t){return Kh(t)}async function of(){return Qh()}async function cf(){return Jh()}async function lf(){return Yh()}function nn(t,e){const n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}let Gt=null;const fa="/thermal-viewer-web/data";async function uf(){if(Gt)return Gt;const t=`${fa}/project.json`,e=await fetch(t);if(!e.ok)throw new Error(`Failed to load project config: ${e.status}`);return Gt=await e.json(),Gt}function df(t){return`${fa}/buildings/${t}`}function pa({isOpen:t,onClose:e,selectedImages:n,imageSettings:s}){const{colormap:r,displayMinTemp:i,displayMaxTemp:a,markers:o}=Re(),[l,u]=x.useState(!1),[d,h]=x.useState(!1),[f,y]=x.useState(null);if(!t)return null;const p=async()=>{if(n.length!==0){h(!0),y(null);try{const m=n.map(v=>{const E=s?.get(v.id),L=(E?.markers||o).map(k=>({x:k.x,y:k.y,tempF:k.tempFahrenheit??k.tempF??0}));return{imageId:v.id,colormap:E?.colormap||r,minTemp:E?.minTemp??i,maxTemp:E?.maxTemp??a,markers:L}}),C=await af({images:m,sideBySide:l,includeMetadata:!0,includeColorbar:!0}),T=n.length===1?`${n[0].filename.replace(/\.(tiff|jpg|JPG)$/i,"")}_report.pdf`:`thermal_report_${n.length}_images.pdf`;nn(C,T),e()}catch(m){console.error("PDF export failed:",m),y(m instanceof Error?m.message:"PDF export failed")}finally{h(!1)}}},w=n.some(m=>m.visiblePath);return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:c.jsxs("div",{className:"bg-[#2d2d2d] rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-[#444]",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444]",children:[c.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:""}),"Export PDF Report"]}),c.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white hover:bg-[#444] rounded-lg transition-all",children:""})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Selected Images"}),c.jsx("span",{className:"text-[#ff6600] font-bold",children:n.length})]}),n.length<=4?c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(m=>c.jsx("span",{className:"text-xs bg-[#333] text-gray-300 px-2 py-1 rounded truncate max-w-[120px]",title:m.filename,children:m.filename.replace(/\.(tiff|jpg|JPG)$/i,"")},m.id))}):c.jsxs("p",{className:"text-xs text-gray-500",children:[n[0].filename.replace(/\.(tiff|jpg|JPG)$/i,"")," and ",n.length-1," more..."]})]}),c.jsx("div",{className:"space-y-3",children:c.jsxs("label",{className:"flex items-center gap-3 p-3 bg-[#1a1a1a] rounded-lg cursor-pointer hover:bg-[#222] transition-colors",children:[c.jsx("input",{type:"checkbox",checked:l,onChange:m=>u(m.target.checked),disabled:!w,className:"w-5 h-5 rounded accent-[#ff6600]"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-white text-sm font-medium",children:"Side-by-side with visible"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:w?"Show thermal and visible images next to each other":"No visible images available for selected images"})]})]})}),c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3 space-y-2",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Report includes:"}),c.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-4",children:[c.jsx("li",{children:" AR Drone Ops branding"}),c.jsx("li",{children:" Your colormap, temperature range, and markers"}),c.jsx("li",{children:" GPS coordinates, direction, altitude"}),c.jsx("li",{children:" Per-image temperature statistics (min/max/mean)"}),c.jsx("li",{children:" Temperature colorbar"})]})]}),f&&c.jsx("div",{className:"bg-red-600/20 border border-red-600/50 text-red-400 text-sm rounded-lg p-3",children:f})]}),c.jsxs("div",{className:"flex gap-3 p-4 border-t border-[#444]",children:[c.jsx("button",{onClick:e,className:"flex-1 py-3 text-sm bg-[#3d3d3d] hover:bg-[#4d4d4d] text-white rounded-lg transition-all font-medium",children:"Cancel"}),c.jsx("button",{onClick:p,disabled:d||n.length===0,className:"flex-1 py-3 text-sm bg-[#ff6600] hover:bg-[#ff8833] disabled:bg-[#555] disabled:text-gray-500 text-white rounded-lg transition-all font-medium",children:d?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating PDF..."]}):`Export ${n.length} Image${n.length>1?"s":""}`})]})]})})}const Ar=new Map;function hf({yaw:t,isRoof:e}){return e?c.jsxs("svg",{className:"w-5 h-5 text-[#ff6600]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M12 8v8M8 12l4 4 4-4"})]}):c.jsxs("svg",{className:"w-5 h-5 text-[#ff6600]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:`rotate(${t}deg)`},children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M12 8v8M8 12l4-4 4 4",fill:"currentColor"})]})}function Or({image:t,isSelected:e,isSelectionMode:n,isChecked:s,onClick:r,onToggleSelect:i}){const a=()=>{n?i():r()};return c.jsxs("button",{onClick:a,className:`thumbnail-card relative rounded overflow-hidden border-2 transition-all ${n&&s?"border-[#0066cc] ring-1 ring-[#0066cc]/50":e?"selected border-[#ff6600] ring-1 ring-[#ff6600]/50":"border-transparent hover:border-[#555]"}`,children:[c.jsx("img",{src:ha(t.id),alt:t.filename,className:"w-full h-20 object-cover bg-[#1a1a1a]",loading:"lazy"}),n&&c.jsx("div",{className:"absolute top-1 left-1",children:c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${s?"bg-[#0066cc] border-[#0066cc]":"bg-black/50 border-white/60"}`,children:s&&c.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 px-1 py-0.5",children:c.jsxs("span",{className:"text-[10px] text-white",children:["#",t.filename.match(/_(\d+)_T/)?.[1]||""]})})]})}function ff({images:t,flightGroups:e,photoGroups:n,isLoading:s}){const{currentImage:r,setCurrentImage:i,clearMarkers:a}=Re(),[o,l]=x.useState("area"),[u,d]=x.useState(0),[h,f]=x.useState(!1),[y,p]=x.useState(new Set),[w,m]=x.useState(!1),C=_=>{p(A=>{const N=new Set(A);return N.has(_)?N.delete(_):N.add(_),N})},T=()=>{p(new Set(t.map(_=>_.id)))},v=()=>{p(new Set)},E=()=>{f(!1),p(new Set)},D=x.useMemo(()=>t.filter(_=>y.has(_.id)),[t,y]);x.useEffect(()=>{if(t.length===0)return;let _=!1;return(async()=>{for(let I=0;I<t.length&&!_;I+=6){const U=t.slice(I,I+6);await Promise.all(U.map(b=>Ar.has(b.id)?Promise.resolve():new Promise(F=>{const V=new Image;V.onload=()=>{Ar.set(b.id,V),F()},V.onerror=()=>F(),V.src=ha(b.id)}))),_||d(Math.min(100,Math.round((I+6)/t.length*100)))}})(),()=>{_=!0}},[t]);const L=x.useMemo(()=>{const _={};for(const A of t)_[A.id]=A;return _},[t]),k=x.useMemo(()=>{const _={};for(const A of t)_[A.flightGroup]||(_[A.flightGroup]=[]),_[A.flightGroup].push(A);return _},[t]),R=_=>{a(),i(_)};return s?c.jsx("div",{className:"p-4 h-full flex items-center justify-center",children:c.jsx("div",{className:"spinner"})}):c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-[#444]",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h2",{className:"text-lg font-bold text-[#ff6600]",children:"Images"}),c.jsx("button",{onClick:()=>h?E():f(!0),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${h?"bg-[#0066cc] text-white":"bg-[#3d3d3d] text-gray-300 hover:bg-[#4d4d4d]"}`,children:h?"Cancel":"Select"})]}),c.jsx("p",{className:"text-sm text-gray-400 mb-3",children:h?c.jsxs("span",{className:"text-[#0066cc]",children:[y.size," selected for PDF export"]}):c.jsxs(c.Fragment,{children:[t.length," thermal images",u<100&&c.jsxs("span",{className:"text-[#ff6600] ml-2",children:["(",u,"% cached)"]})]})}),h?c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:T,className:"flex-1 px-3 py-1.5 text-xs font-medium rounded-lg bg-[#1a1a1a] text-gray-300 hover:bg-[#333] transition-all",children:"Select All"}),c.jsx("button",{onClick:v,disabled:y.size===0,className:"flex-1 px-3 py-1.5 text-xs font-medium rounded-lg bg-[#1a1a1a] text-gray-300 hover:bg-[#333] disabled:opacity-50 transition-all",children:"Clear"})]}):c.jsxs("div",{className:"flex gap-1 bg-[#1a1a1a] p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>l("area"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-all ${o==="area"?"bg-[#ff6600] text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-[#333]"}`,children:"By Area"}),c.jsx("button",{onClick:()=>l("flight"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-all ${o==="flight"?"bg-[#ff6600] text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-[#333]"}`,children:"By Flight"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto sidebar-scroll p-2",children:o==="area"?c.jsx(c.Fragment,{children:n.length>0?n.map(_=>c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"px-2 py-1 mb-2 flex items-center gap-2",children:[c.jsx(hf,{yaw:_.dominantYaw,isRoof:_.isRoofView}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-white",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[_.imageIds.length," image",_.imageIds.length!==1?"s":""]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.imageIds.map(A=>{const N=L[A];return N?c.jsx(Or,{image:N,isSelected:r?.id===A,isSelectionMode:h,isChecked:y.has(A),onClick:()=>R(N),onToggleSelect:()=>C(A)},A):null})})]},_.id)):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"No photo groups found"}),c.jsx("p",{className:"text-xs mt-1",children:'Try switching to "By Flight" view'})]})}):e.map(_=>c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"px-2 py-1 mb-2",children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:_.replace("DJI_","Flight ")}),c.jsxs("p",{className:"text-xs text-gray-500",children:[k[_]?.length||0," images"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:k[_]?.map(A=>c.jsx(Or,{image:A,isSelected:r?.id===A.id,isSelectionMode:h,isChecked:y.has(A.id),onClick:()=>R(A),onToggleSelect:()=>C(A.id)},A.id))})]},_))}),c.jsx("div",{className:"p-3 border-t border-[#444] bg-[#252525]",children:h?c.jsx("button",{onClick:()=>m(!0),disabled:y.size===0,className:"w-full py-2.5 text-sm font-medium rounded-lg transition-all bg-[#0066cc] hover:bg-[#0077ee] disabled:bg-[#333] disabled:text-gray-500 text-white",children:y.size>0?`Export ${y.size} Image${y.size>1?"s":""} to PDF`:"Select images to export"}):c.jsx("p",{className:"text-xs text-gray-500 text-center",children:o==="area"?`${n.length} areas  ${t.length} images`:`${e.length} flights  ${t.length} images`})}),c.jsx(pa,{isOpen:w,onClose:()=>{m(!1),E()},selectedImages:D})]})}const ma=[{id:"white_hot",name:"White Hot",colors:["#000000","#FFFFFF"]},{id:"black_hot",name:"Black Hot",colors:["#FFFFFF","#000000"]},{id:"hot_iron",name:"Hot Iron",colors:["#000000","#330066","#660099","#990066","#CC3300","#FF6600","#FFCC33","#FFFFFF"]},{id:"fulgurite",name:"Fulgurite",colors:["#330000","#660000","#993300","#CC6600","#FF9933","#FFCC66","#FFFF99","#FFFFFF"]},{id:"medical",name:"Medical",colors:["#000033","#330066","#660099","#9900CC","#CC00FF","#FF66FF","#FFCCFF","#FFFFFF"]},{id:"arctic",name:"Arctic",colors:["#000066","#0033CC","#0099FF","#66CCFF","#CCFFFF","#FFFFFF"]},{id:"rainbow",name:"Rainbow",colors:["#0000FF","#00FFFF","#00FF00","#FFFF00","#FF0000"]},{id:"tint",name:"Tint",colors:["#000000","#333333","#666666","#999999","#FF0000","#FF3333","#FF6666"]}];function Pr(t){const e=ma.find(n=>n.id===t);return e?`linear-gradient(to right, ${e.colors.join(", ")})`:"linear-gradient(to right, #000, #fff)"}function Me(t,e=1){return`${t.toFixed(e)}F`}const jr={white_hot:pf(),black_hot:mf(),hot_iron:gf(),fulgurite:yf(),medical:bf(),arctic:wf(),rainbow:xf(),tint:vf()};function Ht(t,e){const n=t.length,s=e/255*(n-1),r=Math.floor(s),i=Math.min(r+1,n-1),a=s-r;return[Math.round(t[r][0]+a*(t[i][0]-t[r][0])),Math.round(t[r][1]+a*(t[i][1]-t[r][1])),Math.round(t[r][2]+a*(t[i][2]-t[r][2]))]}function pf(){return Array.from({length:256},(t,e)=>[e,e,e])}function mf(){return Array.from({length:256},(t,e)=>[255-e,255-e,255-e])}function gf(){const t=[[0,0,0],[51,0,102],[102,0,153],[153,0,102],[204,51,0],[255,102,0],[255,204,51],[255,255,255]];return Array.from({length:256},(e,n)=>[...Ht(t,n)])}function yf(){const t=[[51,0,0],[102,0,0],[153,51,0],[204,102,0],[255,153,51],[255,204,102],[255,255,153],[255,255,255]];return Array.from({length:256},(e,n)=>[...Ht(t,n)])}function bf(){const t=[[0,0,51],[51,0,102],[102,0,153],[153,0,204],[204,0,255],[255,102,255],[255,204,255],[255,255,255]];return Array.from({length:256},(e,n)=>[...Ht(t,n)])}function wf(){const t=[[0,0,102],[0,51,204],[0,153,255],[102,204,255],[204,255,255],[255,255,255]];return Array.from({length:256},(e,n)=>[...Ht(t,n)])}function xf(){const t=[[0,0,255],[0,255,255],[0,255,0],[255,255,0],[255,0,0]];return Array.from({length:256},(e,n)=>[...Ht(t,n)])}function vf(){const t=[];for(let e=0;e<256;e++)if(e<200){const n=Math.round(e/200*180);t.push([n,n,n])}else{const n=(e-200)/55,s=Math.round(180+n*75),r=Math.round(180*(1-n*.8)),i=Math.round(180*(1-n*.8));t.push([s,r,i])}return t}function _f(){const t=x.useRef(null),e=x.useRef(null),{currentImage:n,viewMode:s,colormap:r,opacity:i,minTemp:a,maxTemp:o,displayMinTemp:l,displayMaxTemp:u,markers:d,hoverTemp:h,zoom:f,panX:y,panY:p,thermalZoom:w,alignOffsetX:m,alignOffsetY:C,setThermalStats:T,addMarker:v,setHoverTemp:E,setLoading:D}=Re(),[L,k]=x.useState(!1),[R,_]=x.useState(null),[A,N]=x.useState(null);x.useRef(null);const[I,U]=x.useState(null);x.useEffect(()=>{n&&(D(!0),ef(n.id).then(T).catch(console.error).finally(()=>D(!1)))},[n,T,D]),x.useEffect(()=>{n&&(k(!1),U(null),Hh(n.id).then(B=>{U(B),k(!0)}).catch(B=>{console.error("Failed to load static thermal data:",B),k(!0)}))},[n]),x.useEffect(()=>{},[n,a,o]),x.useEffect(()=>{if(!n)return;const B=s==="visible"||s==="overlay"||s==="split";if(B){const S=tf(n.id,w,m,C),Q=new Image;Q.crossOrigin="anonymous",Q.onload=()=>N(Q),Q.onerror=()=>console.error("Failed to load visible image"),Q.src=S}else!B&&A&&N(null)},[n,s,w,m,C]);const b=x.useMemo(()=>{if(I)return En(I,r,l,u);if(!R)return null;const{width:B,height:S,data:Q}=R,H=new ImageData(B,S),G=jr[r]||jr.hot_iron,J=o-a,q=u-l,Y=l-a;for(let X=0;X<Q.length;X+=4){let $=Q[X]/255*J;$=($-Y)/q,$=Math.max(0,Math.min(1,$));const K=Math.round($*255),[ee,P,M]=G[K];H.data[X]=ee,H.data[X+1]=P,H.data[X+2]=M,H.data[X+3]=255}return H},[R,I,r,a,o,l,u]);x.useEffect(()=>{if(!t.current||!e.current||!b)return;const B=t.current,S=B.getContext("2d");if(!S)return;const Q=e.current,H=Q.clientWidth,G=Q.clientHeight;B.width=H,B.height=G,S.fillStyle="#0a0a0a",S.fillRect(0,0,B.width,B.height);const J=b.width,q=b.height,Y=J/q,X=H/G;let W,$;if(s==="split"){const K=H/2,ee=K/G;Y>ee?(W=K*f,$=W/Y):($=G*f,W=$*Y);const P=(K-W)/2+y,M=(G-$)/2+p,te=K+(K-W)/2+y,ae=M,ne=document.createElement("canvas");ne.width=J,ne.height=q;const re=ne.getContext("2d");re&&(re.putImageData(b,0,0),S.drawImage(ne,P,M,W,$)),A&&S.drawImage(A,te,ae,W,$),S.strokeStyle="#ff6600",S.lineWidth=2,S.beginPath(),S.moveTo(H/2,0),S.lineTo(H/2,G),S.stroke(),S.fillStyle="rgba(0,0,0,0.7)",S.fillRect(10,10,70,24),S.fillRect(H/2+10,10,60,24),S.fillStyle="#ff6600",S.font='bold 12px "Gravesend Sans", sans-serif',S.fillText("THERMAL",15,26),S.fillText("VISIBLE",H/2+15,26)}else{Y>X?(W=H*f,$=W/Y):($=G*f,W=$*Y);const K=(H-W)/2+y,ee=(G-$)/2+p;if(s==="thermal"){const P=document.createElement("canvas");P.width=J,P.height=q;const M=P.getContext("2d");M&&(M.putImageData(b,0,0),S.drawImage(P,K,ee,W,$))}else if(s==="visible"&&A)S.drawImage(A,K,ee,W,$);else if(s==="overlay"&&A){S.drawImage(A,K,ee,W,$),S.globalAlpha=i;const P=document.createElement("canvas");P.width=J,P.height=q;const M=P.getContext("2d");M&&(M.putImageData(b,0,0),S.drawImage(P,K,ee,W,$)),S.globalAlpha=1}else{const P=document.createElement("canvas");P.width=J,P.height=q;const M=P.getContext("2d");M&&(M.putImageData(b,0,0),S.drawImage(P,K,ee,W,$))}if(d.forEach(P=>{const M=K+P.x/J*W,te=ee+P.y/q*$;S.strokeStyle="#ffff00",S.lineWidth=2,S.beginPath(),S.moveTo(M-10,te),S.lineTo(M+10,te),S.moveTo(M,te-10),S.lineTo(M,te+10),S.stroke(),S.beginPath(),S.arc(M,te,8,0,Math.PI*2),S.stroke();const ae=Me(P.tempFahrenheit);S.font='bold 12px "Gravesend Sans", sans-serif';const ne=S.measureText(ae).width;S.fillStyle="rgba(0, 0, 0, 0.8)",S.fillRect(M+12,te-8,ne+8,18),S.fillStyle="#ffff00",S.fillText(ae,M+16,te+5)}),h){const P=K+h.x/J*W,M=ee+h.y/q*$;S.strokeStyle="rgba(255, 255, 255, 0.5)",S.lineWidth=1,S.beginPath(),S.moveTo(P-5,M),S.lineTo(P+5,M),S.moveTo(P,M-5),S.lineTo(P,M+5),S.stroke()}}},[b,A,s,i,f,y,p,d,h]);const F=x.useCallback(async B=>{if(!t.current||!e.current||!n||!b||s==="split")return;const Q=t.current.getBoundingClientRect(),H=B.clientX-Q.left,G=B.clientY-Q.top,J=e.current,q=J.clientWidth,Y=J.clientHeight,X=b.width,W=b.height,$=X/W,K=q/Y;let ee,P;$>K?(ee=q*f,P=ee/$):(P=Y*f,ee=P*$);const M=(q-ee)/2+y,te=(Y-P)/2+p;if(H<M||H>M+ee||G<te||G>te+P)return;const ae=Math.floor((H-M)/ee*X),ne=Math.floor((G-te)/P*W);try{if(jn&&I){const{tempCelsius:re,tempFahrenheit:he}=tn(I,ae,ne),gt={id:`marker-${Date.now()}`,x:ae,y:ne,tempCelsius:re,tempFahrenheit:he};v(gt)}else{const re=await Dn(n.id,ae,ne),he={id:`marker-${Date.now()}`,x:ae,y:ne,tempCelsius:re.tempCelsius,tempFahrenheit:re.tempFahrenheit};v(he)}}catch(re){console.error("Failed to get temperature:",re)}},[n,b,I,s,f,y,p,v]),V=x.useRef(0),ue=x.useCallback(async B=>{const S=Date.now();if(S-V.current<100||(V.current=S,!t.current||!e.current||!n||!b)||s==="split")return;const H=t.current.getBoundingClientRect(),G=B.clientX-H.left,J=B.clientY-H.top,q=e.current,Y=q.clientWidth,X=q.clientHeight,W=b.width,$=b.height,K=W/$,ee=Y/X;let P,M;K>ee?(P=Y*f,M=P/K):(M=X*f,P=M*K);const te=(Y-P)/2+y,ae=(X-M)/2+p;if(G<te||G>te+P||J<ae||J>ae+M){E(null);return}const ne=Math.floor((G-te)/P*W),re=Math.floor((J-ae)/M*$);try{if(jn&&I){const{tempFahrenheit:he}=tn(I,ne,re);E({x:ne,y:re,tempF:he})}else{const he=await Dn(n.id,ne,re);E({x:ne,y:re,tempF:he.tempFahrenheit})}}catch{E(null)}},[n,b,I,s,f,y,p,E]),Z=()=>E(null),ge=x.useCallback(B=>{B.preventDefault(),Re.getState().clearMarkers()},[]),We=x.useCallback(async B=>{if(!t.current||!e.current||!n||!b||s==="split")return;B.preventDefault();const S=B.changedTouches[0],H=t.current.getBoundingClientRect(),G=S.clientX-H.left,J=S.clientY-H.top,q=e.current,Y=q.clientWidth,X=q.clientHeight,W=b.width,$=b.height,K=W/$,ee=Y/X;let P,M;K>ee?(P=Y*f,M=P/K):(M=X*f,P=M*K);const te=(Y-P)/2+y,ae=(X-M)/2+p;if(G<te||G>te+P||J<ae||J>ae+M)return;const ne=Math.floor((G-te)/P*W),re=Math.floor((J-ae)/M*$);try{if(jn&&I){const{tempCelsius:he,tempFahrenheit:gt}=tn(I,ne,re),ga={id:`marker-${Date.now()}`,x:ne,y:re,tempCelsius:he,tempFahrenheit:gt};v(ga)}else{const he=await Dn(n.id,ne,re),gt={id:`marker-${Date.now()}`,x:ne,y:re,tempCelsius:he.tempCelsius,tempFahrenheit:he.tempFahrenheit};v(gt)}}catch(he){console.error("Failed to get temperature:",he)}},[n,b,I,s,f,y,p,v]),ie=Re(B=>B.thermalStats);return c.jsxs("div",{ref:e,className:"canvas-container",children:[c.jsx("canvas",{ref:t,onClick:F,onMouseMove:ue,onMouseLeave:Z,onContextMenu:ge,onTouchEnd:We,className:"cursor-crosshair touch-none"}),L&&ie&&c.jsx("div",{className:"absolute top-4 right-4 bg-black/85 backdrop-blur-sm text-white px-3 py-2 rounded-lg shadow-lg",children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsx("span",{className:"text-blue-400 font-bold text-xs",children:"MIN"}),c.jsx("span",{className:"font-mono text-sm",children:Me(ie.minTemp)})]}),c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsx("span",{className:"text-red-400 font-bold text-xs",children:"MAX"}),c.jsx("span",{className:"font-mono text-sm",children:Me(ie.maxTemp)})]}),c.jsxs("div",{className:"flex items-center justify-between gap-4 text-gray-400 text-xs border-t border-gray-600 pt-1 mt-1",children:[c.jsx("span",{children:"AVG"}),c.jsx("span",{className:"font-mono",children:Me(ie.meanTemp)})]})]})}),h&&c.jsxs("div",{className:"absolute top-4 left-4 bg-black/85 backdrop-blur-sm text-white px-3 py-2 rounded-lg shadow-lg hidden md:block",children:[c.jsx("span",{className:"text-[#ff6600] font-bold text-lg",children:Me(h.tempF)}),c.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(",h.x,", ",h.y,")"]})]}),d.length>0&&s!=="split"&&c.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 md:hidden",children:c.jsxs("button",{onClick:()=>Re.getState().clearMarkers(),className:"bg-red-600/90 backdrop-blur-sm text-white px-4 py-3 rounded-full shadow-lg flex items-center gap-2 active:scale-95 transition-transform",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"text-sm font-medium",children:["Clear (",d.length,")"]})]})}),d.length>0&&s!=="split"&&c.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/80 text-white px-3 py-2 rounded-lg text-sm hidden md:block",children:[d.length," marker",d.length!==1?"s":"","  Right-click to clear"]}),d.length===0&&L&&s!=="split"&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 backdrop-blur-sm text-gray-200 px-4 py-2 rounded-full text-sm md:hidden shadow-lg",children:" Tap to add temperature marker"}),!L&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:c.jsx("div",{className:"spinner"})})]})}function ze({title:t,children:e,defaultOpen:n=!0,badge:s}){const[r,i]=x.useState(n);return c.jsxs("section",{className:"border-b border-[#444] last:border-0",children:[c.jsxs("button",{onClick:()=>i(!r),className:"w-full flex items-center justify-between py-3 px-1 text-left",children:[c.jsxs("span",{className:"text-sm font-bold text-[#ff6600] flex items-center gap-2",children:[t,s!==void 0&&c.jsx("span",{className:"bg-[#ff6600] text-white text-xs px-1.5 py-0.5 rounded-full",children:s})]}),c.jsx("span",{className:"text-gray-500 text-lg",children:r?"":"+"})]}),r&&c.jsx("div",{className:"pb-4",children:e})]})}function Ef(){const{currentImage:t,thermalStats:e,colormap:n,opacity:s,minTemp:r,maxTemp:i,displayMinTemp:a,displayMaxTemp:o,markers:l,thermalZoom:u,alignOffsetX:d,alignOffsetY:h,setColormap:f,setOpacity:y,setDisplayTempRange:p,clearMarkers:w,removeMarker:m,resetView:C,setThermalZoom:T,setAlignOffset:v}=Re(),E=async()=>{if(t)try{const b=await nf(t.id,{format:"png",colormap:n,minTemp:a,maxTemp:o,includeAnnotations:l.length>0,includeColorbar:!0,markers:l.map(F=>({x:F.x,y:F.y,tempF:F.tempFahrenheit}))});nn(b,`${t.filename.replace(".tiff","")}_thermal.png`)}catch(b){console.error("Export failed:",b)}},D=async()=>{if(t)try{const b=await rf(t.id);nn(b,`${t.filename.replace(".tiff","")}_temps.csv`)}catch(b){console.error("CSV export failed:",b)}},[L,k]=x.useState(!1),[R,_]=x.useState(""),[A,N]=x.useState(!1),I=t?.visiblePath!=null,U=async()=>{if(t){if(!I){alert("No visible image available for this thermal image. GIF export requires both thermal and visible images.");return}k(!0),_("Generating frames...");try{const b=await sf(t.id,{colormap:n,minTemp:a,maxTemp:o,duration:5,fps:12,thermalZoom:u,offsetX:d,offsetY:h});if(!b||b.size===0)throw new Error("Received empty response from server");_("Saving...");const F=t.filename.replace(".tiff","").replace(".JPG","").replace(".jpg","")+"_thermal_visible.gif";nn(b,F),_("Done!"),setTimeout(()=>_(""),2e3)}catch(b){console.error("GIF export failed:",b);const F=b instanceof Error?b.message:"Unknown error";alert(`GIF export failed: ${F}`),_("")}finally{k(!1)}}};return c.jsxs("div",{className:"p-4 space-y-0",children:[c.jsx(ze,{title:"Color Palette",defaultOpen:!0,children:c.jsx("div",{className:"grid grid-cols-4 gap-2",children:ma.map(b=>c.jsxs("button",{onClick:()=>f(b.id),className:`relative rounded-lg overflow-hidden border-2 transition-all ${n===b.id?"border-[#ff6600] ring-2 ring-[#ff6600]/50 scale-105":"border-transparent hover:border-[#555] active:scale-95"}`,children:[c.jsx("div",{className:"h-8",style:{background:Pr(b.id)}}),c.jsx("div",{className:"bg-[#2d2d2d] px-1 py-1",children:c.jsx("span",{className:"text-[10px] text-gray-300 block truncate",children:b.name})})]},b.id))})}),c.jsx(ze,{title:"Temperature Range",defaultOpen:!0,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"h-6 rounded-lg",style:{background:Pr(n)}}),e&&c.jsx("div",{className:"absolute top-0 h-6 border-l-2 border-r-2 border-white/80 pointer-events-none rounded",style:{left:`${(a-r)/(i-r)*100}%`,right:`${100-(o-r)/(i-r)*100}%`}})]}),c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[c.jsx("span",{className:"text-blue-400 font-bold",children:"MIN"}),c.jsx("span",{className:"text-blue-400 font-mono text-base",children:Me(a)})]}),c.jsx("input",{type:"range",min:r,max:i,step:.5,value:a,onChange:b=>p(parseFloat(b.target.value),o),className:"w-full h-8 appearance-none bg-transparent cursor-pointer touch-pan-y",style:{WebkitAppearance:"none"}})]}),c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[c.jsx("span",{className:"text-red-400 font-bold",children:"MAX"}),c.jsx("span",{className:"text-red-400 font-mono text-base",children:Me(o)})]}),c.jsx("input",{type:"range",min:r,max:i,step:.5,value:o,onChange:b=>p(a,parseFloat(b.target.value)),className:"w-full h-8 appearance-none bg-transparent cursor-pointer touch-pan-y"})]}),c.jsx("button",{onClick:()=>p(r,i),className:"w-full py-3 text-sm text-gray-400 hover:text-white active:bg-[#4d4d4d] bg-[#3d3d3d] rounded-lg transition-all",children:"Reset to Auto Range"})]})}),c.jsx(ze,{title:"Overlay Blend",defaultOpen:!0,children:c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("span",{className:"text-gray-400 text-sm",children:"Thermal Visibility"}),c.jsxs("span",{className:"text-[#ff6600] font-mono text-lg font-bold",children:[Math.round(s*100),"%"]})]}),c.jsx("input",{type:"range",min:0,max:1,step:.05,value:s,onChange:b=>y(parseFloat(b.target.value)),className:"w-full h-10 appearance-none bg-transparent cursor-pointer touch-pan-y"}),c.jsx("div",{className:"flex gap-2 mt-3",children:[.25,.5,.75].map(b=>c.jsxs("button",{onClick:()=>y(b),className:`flex-1 py-2 text-xs rounded-lg transition-all ${Math.abs(s-b)<.05?"bg-[#ff6600] text-white":"bg-[#3d3d3d] text-gray-400 active:bg-[#4d4d4d]"}`,children:[Math.round(b*100),"%"]},b))})]})}),c.jsx(ze,{title:"Alignment",defaultOpen:!1,children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-xs text-gray-500 -mt-2 mb-2",children:"Adjust to align thermal overlay with visible image"}),c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[c.jsx("span",{className:"text-gray-400",children:"Visible Crop Zoom"}),c.jsxs("span",{className:"text-white font-mono text-base",children:[u.toFixed(2),"x"]})]}),c.jsx("input",{type:"range",min:1,max:4,step:.05,value:u,onChange:b=>T(parseFloat(b.target.value)),className:"w-full h-8"}),c.jsx("div",{className:"flex gap-2 mt-2",children:[1,1.5,2,2.5].map(b=>c.jsxs("button",{onClick:()=>T(b),className:`flex-1 py-1.5 text-xs rounded transition-all ${Math.abs(u-b)<.05?"bg-[#ff6600] text-white":"bg-[#3d3d3d] text-gray-400"}`,children:[b,"x"]},b))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[c.jsx("span",{className:"text-gray-400",children:"X Offset"}),c.jsxs("span",{className:"text-white font-mono",children:[d,"px"]})]}),c.jsx("input",{type:"range",min:-150,max:150,step:1,value:d,onChange:b=>v(parseInt(b.target.value),h),className:"w-full h-6"}),c.jsxs("div",{className:"flex gap-1 mt-2",children:[c.jsx("button",{onClick:()=>v(d-10,h),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"-10"}),c.jsx("button",{onClick:()=>v(d-1,h),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"-1"}),c.jsx("button",{onClick:()=>v(0,h),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded text-[#ff6600]",children:"0"}),c.jsx("button",{onClick:()=>v(d+1,h),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"+1"}),c.jsx("button",{onClick:()=>v(d+10,h),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"+10"})]})]}),c.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[c.jsx("span",{className:"text-gray-400",children:"Y Offset"}),c.jsxs("span",{className:"text-white font-mono",children:[h,"px"]})]}),c.jsx("input",{type:"range",min:-150,max:150,step:1,value:h,onChange:b=>v(d,parseInt(b.target.value)),className:"w-full h-6"}),c.jsxs("div",{className:"flex gap-1 mt-2",children:[c.jsx("button",{onClick:()=>v(d,h-10),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"-10"}),c.jsx("button",{onClick:()=>v(d,h-1),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"-1"}),c.jsx("button",{onClick:()=>v(d,0),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded text-[#ff6600]",children:"0"}),c.jsx("button",{onClick:()=>v(d,h+1),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"+1"}),c.jsx("button",{onClick:()=>v(d,h+10),className:"flex-1 py-1 text-xs bg-[#3d3d3d] rounded",children:"+10"})]})]})]}),c.jsx("button",{onClick:()=>{T(1),v(0,0)},className:"w-full py-3 text-sm text-gray-400 hover:text-white active:bg-[#4d4d4d] bg-[#3d3d3d] rounded-lg",children:"Reset Alignment"})]})}),l.length>0&&c.jsx(ze,{title:"Markers",badge:l.length,defaultOpen:!0,children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:w,className:"w-full py-3 text-sm bg-red-600/20 text-red-400 hover:bg-red-600/30 active:bg-red-600/40 rounded-lg border border-red-600/30 transition-all",children:" Clear All Markers"}),c.jsx("div",{className:"bg-[#1a1a1a] rounded-lg overflow-hidden max-h-48 overflow-y-auto",children:l.map((b,F)=>c.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-[#333] last:border-0",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"w-6 h-6 rounded-full bg-yellow-500/20 text-yellow-400 text-xs flex items-center justify-center font-bold",children:F+1}),c.jsx("span",{className:"text-lg font-mono text-[#ff6600] font-bold",children:Me(b.tempFahrenheit)})]}),c.jsx("button",{onClick:()=>m(b.id),className:"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-red-400 hover:bg-red-500/20 rounded-full transition-all",children:""})]},b.id))})]})}),c.jsx(ze,{title:"Export",defaultOpen:!1,children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:E,disabled:!t,className:"w-full py-4 text-sm bg-[#ff6600] hover:bg-[#ff8833] active:bg-[#e65c00] disabled:bg-[#555] disabled:text-gray-500 text-white rounded-lg transition-all font-medium",children:" Export Image (PNG)"}),c.jsx("button",{onClick:U,disabled:!t||L||!I,className:"w-full py-4 text-sm bg-[#6b21a8] hover:bg-[#7c3aed] active:bg-[#581c87] disabled:bg-[#555] disabled:text-gray-500 text-white rounded-lg transition-all font-medium",children:L?` ${R||"Processing..."}`:" Export Animated GIF"}),c.jsx("p",{className:"text-xs text-gray-500 -mt-1 px-1",children:I?"5-second loop fading between thermal & visible":" No visible image - GIF export unavailable"}),c.jsx("button",{onClick:D,disabled:!t,className:"w-full py-4 text-sm bg-[#3d3d3d] hover:bg-[#4d4d4d] active:bg-[#555] disabled:bg-[#333] disabled:text-gray-500 text-white rounded-lg transition-all font-medium",children:" Export Temperature CSV"}),c.jsx("button",{onClick:()=>N(!0),disabled:!t,className:"w-full py-4 text-sm bg-[#0066cc] hover:bg-[#0077ee] active:bg-[#0055aa] disabled:bg-[#333] disabled:text-gray-500 text-white rounded-lg transition-all font-medium",children:" Export PDF Report"}),c.jsx("p",{className:"text-xs text-gray-500 -mt-1 px-1",children:"Professional report with metadata, colorbar, and markers"})]})}),c.jsx(ze,{title:"View Controls",defaultOpen:!1,children:c.jsx("button",{onClick:C,className:"w-full py-3 text-sm bg-[#3d3d3d] hover:bg-[#4d4d4d] active:bg-[#555] text-white rounded-lg transition-all",children:"Reset Zoom & Pan"})}),c.jsxs("div",{className:"text-xs text-gray-500 space-y-1.5 pt-4 border-t border-[#444]",children:[c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-base",children:""}),c.jsx("span",{children:"Tap image to add temperature marker"})]}),c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-base",children:""}),c.jsx("span",{children:'Use "Clear All Markers" button above'})]})]}),c.jsx(pa,{isOpen:A,onClose:()=>N(!1),selectedImages:t?[t]:[]})]})}const Dr={"North Face":"#ef4444","South Face":"#3b82f6","East Face":"#22c55e","West Face":"#eab308","Roof View":"#a855f7"},If="#6b7280",_e=[[0,0,0],[51,0,102],[102,0,153],[153,0,102],[204,51,0],[255,102,0],[255,204,51],[255,255,255]];function Tf(){const t=[],e=_e.length;for(let n=0;n<256;n++){const s=n/255*(e-1),r=Math.floor(s),i=Math.min(r+1,e-1),a=s-r;t.push([Math.round(_e[r][0]+a*(_e[i][0]-_e[r][0])),Math.round(_e[r][1]+a*(_e[i][1]-_e[r][1])),Math.round(_e[r][2]+a*(_e[i][2]-_e[r][2]))])}return t}const Mn=Tf();function Sf(t,e,n){let s=0,r=1/0;for(let i=0;i<256;i++){const a=t-Mn[i][0],o=e-Mn[i][1],l=n-Mn[i][2],u=a*a+o*o+l*l;u<r&&(r=u,s=i)}return s/255}function Cf(t,e,n){const s=n?40:30,r=n?3:2;return`
    <svg xmlns="http://www.w3.org/2000/svg" width="${s}" height="${s}" viewBox="0 0 40 40">
      <g transform="rotate(${t}, 20, 20)" opacity="${n?1:.85}">
        <polygon points="20,4 28,22 20,18 12,22" fill="${e}" stroke="#fff" stroke-width="${r}"/>
        <circle cx="20" cy="24" r="6" fill="${e}" stroke="#fff" stroke-width="${r}"/>
        ${n?'<circle cx="20" cy="24" r="3" fill="#fff"/>':""}
      </g>
    </svg>
  `}function Rf(t,e){const a=(t-30.5-90)*Math.PI/180,o=(t+30.5-90)*Math.PI/180,l=40+60*Math.cos(a),u=40+60*Math.sin(a),d=40+60*Math.cos(o),h=40+60*Math.sin(o);return`
    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80">
      <polygon points="40,40 ${l},${u} ${d},${h}" fill="${e}" opacity="0.2" stroke="${e}" stroke-width="1" stroke-opacity="0.4"/>
    </svg>
  `}function Nf({images:t,photoGroups:e,mapData:n,orthophoto:s}){const r=x.useRef(null),i=x.useRef(null),a=x.useRef([]),o=x.useRef([]),l=x.useRef(null),u=x.useRef(null),d=x.useRef(null),h=x.useRef(null),[f,y]=x.useState(!1),[p,w]=x.useState(!1),[m,C]=x.useState(!0),[T,v]=x.useState(.7),[E,D]=x.useState(null),{currentImage:L,setCurrentImage:k}=Re(),R=n?.markers||t.filter(N=>N.gps?.lat&&N.gps?.lon).map(N=>{let I="Unknown";for(const U of e)if(U.imageIds.includes(N.id)){I=U.name;break}return{imageId:N.id,lat:N.gps.lat,lon:N.gps.lon,yaw:N.gimbalYaw??0,pitch:N.gimbalPitch??0,altitude:N.relativeAltitude??0,facadeGroup:I}}),_=n?.center||(()=>{if(R.length===0)return{lat:42.34,lon:-71.12};const N=R.reduce((U,b)=>U+b.lat,0)/R.length,I=R.reduce((U,b)=>U+b.lon,0)/R.length;return{lat:N,lon:I}})();x.useEffect(()=>{if(!r.current||i.current)return;const N=()=>{if(!window.google?.maps){setTimeout(N,200);return}const I=new google.maps.Map(r.current,{center:{lat:_.lat,lng:_.lon},zoom:19,mapTypeId:"satellite",tilt:0,mapId:"thermal-viewer-map",gestureHandling:"greedy"});i.current=I,h.current=new google.maps.InfoWindow,y(!0)};N()},[_.lat,_.lon]),x.useEffect(()=>{if(!f||!i.current||!s)return;const N=i.current;if(l.current&&(l.current.setMap(null),l.current=null),!m)return;const I=new google.maps.LatLngBounds({lat:s.bounds.south,lng:s.bounds.west},{lat:s.bounds.north,lng:s.bounds.east}),U=new google.maps.GroundOverlay(s.url,I,{opacity:T,clickable:!0});U.setMap(N),l.current=U;const b=new Image;return b.crossOrigin="anonymous",b.onload=()=>{d.current=b;const F=document.createElement("canvas");F.width=b.width,F.height=b.height,F.getContext("2d").drawImage(b,0,0),u.current=F},b.src=s.url,U.addListener("click",F=>{if(!u.current||!F.latLng)return;const V=F.latLng.lat(),ue=F.latLng.lng(),Z=u.current,ge=s.bounds,We=(ue-ge.west)/(ge.east-ge.west)*Z.width,ie=(ge.north-V)/(ge.north-ge.south)*Z.height;if(We<0||We>=Z.width||ie<0||ie>=Z.height)return;const S=Z.getContext("2d").getImageData(Math.floor(We),Math.floor(ie),1,1).data,[Q,H,G]=S;if(S[3]<128||Q===0&&H===0&&G===0){D(null);return}const J=Sf(Q,H,G),q=s.tempRange,Y=q.minTempF+J*(q.maxTempF-q.minTempF),X=q.minTempC+J*(q.maxTempC-q.minTempC);D({lat:V,lon:ue,tempF:Y,tempC:X}),h.current?.setContent(`
        <div style="font-family: sans-serif; font-size: 14px; color: #333; min-width: 120px;">
          <div style="font-weight: bold; font-size: 18px; color: #ff6600; margin-bottom: 4px;">
            ${Y.toFixed(1)}F
          </div>
          <div style="color: #666;">${X.toFixed(1)}C</div>
        </div>
      `),h.current?.setPosition(F.latLng),h.current?.open(N)}),()=>{U.setMap(null)}},[f,s,m,T]),x.useEffect(()=>{l.current&&l.current.setOpacity(T)},[T]),x.useEffect(()=>{if(!f||!i.current)return;const N=i.current;a.current.forEach(I=>I.map=null),a.current=[],o.current.forEach(I=>I.map=null),o.current=[],R.forEach(I=>{const U=L?.id===I.imageId,b=Dr[I.facadeGroup]||If,F=document.createElement("div");F.innerHTML=Cf(I.yaw,b,U),F.style.cursor="pointer",F.style.transition="transform 0.15s ease",U&&(F.style.zIndex="10",F.style.filter="drop-shadow(0 0 6px rgba(255,255,255,0.8))");const V=new google.maps.marker.AdvancedMarkerElement({map:N,position:{lat:I.lat,lng:I.lon},content:F,title:`${I.facadeGroup}  ${I.imageId}`,zIndex:U?100:1});if(V.addListener("click",()=>{const ue=t.find(Z=>Z.id===I.imageId);ue&&k(ue)}),F.addEventListener("mouseenter",()=>{const Z=["N","NE","E","SE","S","SW","W","NW"][Math.round((I.yaw%360+360)%360/45)%8],ge=(I.altitude*3.281).toFixed(0);h.current?.setContent(`
          <div style="font-family: sans-serif; font-size: 13px; color: #333; min-width: 140px;">
            <div style="font-weight: bold; margin-bottom: 4px;">${I.facadeGroup}</div>
            <div>Direction: ${Z} (${I.yaw.toFixed(0)})</div>
            <div>Altitude: ${ge} ft</div>
            <div>Pitch: ${I.pitch.toFixed(0)}</div>
            <div style="color: #888; font-size: 11px; margin-top: 4px;">Click to view</div>
          </div>
        `),h.current?.open(N,V)}),F.addEventListener("mouseleave",()=>{h.current?.close()}),a.current.push(V),p){const ue=document.createElement("div");ue.innerHTML=Rf(I.yaw,b),ue.style.pointerEvents="none";const Z=new google.maps.marker.AdvancedMarkerElement({map:N,position:{lat:I.lat,lng:I.lon},content:ue,zIndex:0});o.current.push(Z)}})},[f,R,L?.id,t,k,p]),x.useEffect(()=>{!i.current||!L?.gps||i.current.panTo({lat:L.gps.lat,lng:L.gps.lon})},[L?.id,L?.gps]);const A=!!s;return c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("div",{ref:r,className:"w-full h-full"}),!f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#1a1a1a]",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx("div",{className:"spinner mb-4"}),c.jsx("p",{children:"Loading Google Maps..."})]})}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-[#2d2d2d]/90 backdrop-blur-sm rounded-lg p-3 text-xs text-gray-300 z-10",children:[c.jsx("div",{className:"font-bold text-white mb-2",children:"Photo Locations"}),Object.entries(Dr).map(([N,I])=>c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:I}}),c.jsx("span",{children:N})]},N)),c.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600 space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p,onChange:N=>w(N.target.checked),className:"rounded"}),c.jsx("span",{children:"Show FOV cones"})]}),A&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:m,onChange:N=>C(N.target.checked),className:"rounded"}),c.jsx("span",{children:"Thermal overlay"})]}),m&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500",children:"Opacity:"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:T,onChange:N=>v(parseFloat(N.target.value)),className:"w-20 accent-[#ff6600]"})]})]})]}),c.jsxs("div",{className:"mt-1 text-gray-500",children:[R.length," photos"]}),A&&m&&c.jsx("div",{className:"mt-1 text-[#ff6600] text-[10px]",children:"Click overlay for temp"})]}),E&&c.jsxs("div",{className:"absolute top-4 right-4 bg-[#2d2d2d]/95 backdrop-blur-sm rounded-lg p-4 z-10 text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-[#ff6600]",children:[E.tempF.toFixed(1),"F"]}),c.jsxs("div",{className:"text-sm text-gray-400",children:[E.tempC.toFixed(1),"C"]}),c.jsx("button",{onClick:()=>D(null),className:"mt-2 text-xs text-gray-500 hover:text-white",children:"dismiss"})]})]})}function kf({building:t,isSelected:e,onClick:n}){const s=!t.hasData;return c.jsxs("button",{onClick:n,disabled:s,className:`
        relative rounded-lg border-2 p-3 text-left transition-all font-gravesend
        ${e?"border-[#ff6600] bg-[#ff6600]/10":s?"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60":"border-gray-200 bg-white hover:border-[#ff6600]/50 hover:shadow-md cursor-pointer"}
      `,children:[c.jsx("div",{className:"text-lg font-bold text-black leading-tight",children:t.label}),c.jsx("div",{className:`text-xs mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:t.hasData?`${t.imageCount??0} image${(t.imageCount??0)!==1?"s":""}`:"Survey Pending"})]})}function Af({project:t,selectedBuildingId:e,onSelectBuilding:n}){const s=x.useMemo(()=>{const i={};for(const a of t.buildings)i[a.type]||(i[a.type]=[]),i[a.type].push(a);return i},[t.buildings]),r=x.useMemo(()=>Object.keys(s).sort(),[s]);return c.jsxs("div",{className:"h-full flex flex-col bg-white font-gravesend",children:[c.jsxs("div",{className:"p-5 border-b border-gray-200",children:[c.jsx("h1",{className:"text-xl font-bold text-black leading-tight",children:t.name}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.location})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:r.map(i=>{const a=s[i],o=t.buildingTypes[i],l=a.length;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[c.jsxs("h2",{className:"text-sm font-bold text-black uppercase tracking-wide",children:["Type ",i," Buildings"]}),c.jsxs("span",{className:"text-xs text-gray-400",children:["(",l,")"]})]}),o?.description&&c.jsx("p",{className:"text-xs text-gray-400 -mt-2 mb-3",children:o.description}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.map(u=>c.jsx(kf,{building:u,isSelected:e===u.id,onClick:()=>n(u.id)},u.id))})]},i)})}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsx("p",{className:"text-xs text-gray-400 text-center",children:t.client})})]})}function Of(){const[t,e]=x.useState(""),[n,s]=x.useState(""),[r,i]=x.useState(""),[a,o]=x.useState(!1),l=async u=>{u.preventDefault(),i(""),o(!0);try{await jl(Bi,t.trim(),n)}catch(d){const h=d.code;i(h==="auth/invalid-credential"||h==="auth/wrong-password"||h==="auth/user-not-found"?"Invalid email or password.":h==="auth/too-many-requests"?"Too many attempts. Please try again later.":"Unable to sign in. Please try again."),o(!1)}};return c.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center font-gravesend",children:c.jsxs("div",{className:"w-full max-w-sm p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-black",children:"AR Drone Ops"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Inspection Portal"})]}),c.jsxs("form",{onSubmit:l,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),required:!0,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black",placeholder:"you@example.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"password",value:n,onChange:u=>s(u.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black",placeholder:"Enter password"})]}),r&&c.jsx("p",{className:"text-sm text-red-600 text-center",children:r}),c.jsx("button",{type:"submit",disabled:a||!t.trim()||!n,className:"w-full py-2.5 bg-black text-white font-medium rounded-lg hover:bg-gray-800 disabled:bg-gray-400 transition-colors",children:a?"Signing in...":"Sign In"})]}),c.jsx("p",{className:"text-xs text-gray-400 text-center mt-8",children:"Contact AR Drone Ops for access"})]})})}const Pf=x.lazy(()=>ns(()=>import("./ThreeView-CdPkMSpc.js"),__vite__mapDeps([4,1,2]))),jf=new Ba({defaultOptions:{queries:{staleTime:300*1e3,refetchOnWindowFocus:!1}}}),Mr=[{id:"viewer",label:"Thermal"},{id:"map",label:"Map"},{id:"3d",label:"3D"}];function Df(){const{currentImage:t,isLoading:e,markers:n,setCurrentImage:s}=Re(),r=qr(),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[u,d]=x.useState("viewer"),[h,f]=x.useState(null),[y,p]=x.useState("buildings"),{data:w,isLoading:m,error:C}=yt({queryKey:["projectConfig"],queryFn:()=>uf()}),{data:T,isLoading:v,error:E}=yt({queryKey:["images",h],queryFn:()=>Zh(),enabled:!!h}),{data:D}=yt({queryKey:["mapData",h],queryFn:()=>of(),enabled:!!h}),{data:L}=yt({queryKey:["model3D",h],queryFn:()=>cf(),enabled:!!h}),{data:k}=yt({queryKey:["orthophoto",h],queryFn:()=>lf(),enabled:!!h}),R=x.useCallback(b=>{s(null);const F=df(b);Mh(F),f(b),p("images"),r.invalidateQueries({queryKey:["images"]}),r.invalidateQueries({queryKey:["mapData"]}),r.invalidateQueries({queryKey:["model3D"]}),r.invalidateQueries({queryKey:["orthophoto"]})},[s,r]),_=x.useCallback(()=>{p("buildings"),s(null)},[s]);if(x.useEffect(()=>{t&&window.innerWidth<768&&a(!1)},[t]),m)return c.jsx("div",{className:"flex items-center justify-center h-screen bg-white font-gravesend",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"spinner-light mb-4"}),c.jsx("p",{className:"text-gray-500",children:"Loading project..."})]})});if(C)return c.jsx("div",{className:"flex items-center justify-center h-screen bg-white font-gravesend",children:c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h1",{className:"text-2xl text-red-500 mb-4",children:"Project Load Error"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Could not load project configuration."}),c.jsx("code",{className:"block mt-4 p-2 bg-gray-100 rounded text-sm text-gray-600",children:String(C)})]})});if(E&&h)return c.jsx("div",{className:"flex items-center justify-center h-screen bg-white font-gravesend",children:c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h1",{className:"text-2xl text-red-500 mb-4",children:"Data Load Error"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Could not load thermal data for this building."}),c.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Back to Buildings"})]})});const A=w?.buildings.find(b=>b.id===h),N=({tab:b})=>c.jsx("button",{onClick:()=>d(b.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${u===b.id?"bg-black text-white":"text-gray-400 hover:text-black hover:bg-gray-100"}`,children:c.jsx("span",{children:b.label})}),I=u==="viewer",U=u==="viewer";return c.jsxs("div",{className:"theme-light flex flex-col md:flex-row h-screen bg-white font-gravesend",children:[c.jsxs("header",{className:"md:hidden h-14 bg-white border-b border-gray-200 flex items-center px-2 justify-between shrink-0 safe-area-bottom",children:[I?c.jsx("button",{onClick:()=>{a(!i),l(!1)},className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-all ${i?"bg-black text-white":"text-black active:bg-gray-100"}`,children:c.jsx("span",{className:"text-sm font-medium",children:y==="buildings"?"Buildings":"Images"})}):c.jsx("div",{className:"w-20"}),c.jsx("div",{className:"flex gap-1",children:Mr.map(b=>c.jsx("button",{onClick:()=>d(b.id),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-all ${u===b.id?"bg-black text-white":"text-gray-400 active:bg-gray-100"}`,children:c.jsx("span",{children:b.label})},b.id))}),U?c.jsxs("button",{onClick:()=>{l(!o),a(!1)},className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-all ${o?"bg-black text-white":"text-black active:bg-gray-100"}`,children:[c.jsx("span",{className:"text-sm font-medium",children:"Settings"}),n.length>0&&c.jsx("span",{className:"bg-[#ff6600] text-white text-xs px-1.5 py-0.5 rounded-full font-bold ml-1",children:n.length})]}):c.jsx("div",{className:"w-20"})]}),I&&c.jsxs(c.Fragment,{children:[c.jsxs("aside",{className:`${i?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:relative z-30 h-[calc(100%-3.5rem)] md:h-auto top-14 md:top-0 w-72 transition-transform duration-300 ease-out bg-white border-r border-gray-200 overflow-y-auto`,children:[c.jsxs("div",{className:"md:hidden flex justify-between items-center p-3 border-b border-gray-200 sticky top-0 bg-white z-10",children:[c.jsx("span",{className:"font-bold text-black",children:y==="buildings"?"Select Building":A?.label||"Images"}),c.jsx("button",{onClick:()=>a(!1),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-black bg-gray-100 rounded-full",children:""})]}),y==="buildings"&&w?c.jsx(Af,{project:w,selectedBuildingId:h,onSelectBuilding:R}):y==="images"&&h?c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("button",{onClick:_,className:"hidden md:flex items-center gap-2 px-4 py-3 text-sm text-gray-500 hover:text-black hover:bg-gray-50 border-b border-gray-200 transition-colors",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"All Buildings"}),A&&c.jsx("span",{className:"ml-auto text-xs font-medium text-[#ff6600]",children:A.label})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsx(ff,{images:T?.images||[],flightGroups:T?.flightGroups||[],photoGroups:T?.photoGroups||[],isLoading:v})})]}):null]}),i&&c.jsx("div",{className:"md:hidden fixed inset-0 bg-black/40 z-20 top-14",onClick:()=>a(!1)}),c.jsx("button",{onClick:()=>a(!i),className:"hidden md:block absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black hover:bg-gray-800 text-white p-2 rounded-r transition-all",style:{left:i?"288px":"0"},children:i?"":""})]}),c.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[c.jsxs("header",{className:"hidden md:flex h-12 bg-white border-b border-gray-200 items-center px-4 justify-between shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-lg font-bold text-black",children:w?.name||"Thermal Viewer"}),c.jsx("div",{className:"flex gap-1 ml-4",children:Mr.map(b=>c.jsx(N,{tab:b},b.id))})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[A&&c.jsx("span",{className:"text-sm font-medium text-[#ff6600]",children:A.label}),t&&c.jsx("span",{className:"text-sm text-gray-400",children:t.filename})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden min-h-0",children:[u==="viewer"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1 relative min-h-[250px] md:min-h-0",children:[t?c.jsx(_f,{}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center text-gray-400 p-4",children:[c.jsx("p",{className:"text-xl mb-2",children:h?"Select an image to begin":"Select a building to begin"}),c.jsx("p",{className:"text-sm",children:v?"Loading images...":h?`${T?.totalCount||0} thermal images available`:`${w?.buildings.filter(b=>b.hasData).length||0} buildings with data`}),c.jsx("button",{onClick:()=>a(!0),className:"mt-4 px-4 py-2 bg-black text-white rounded-lg md:hidden",children:h?"Browse Images":"Browse Buildings"})]})}),e&&c.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center",children:c.jsx("div",{className:"spinner-light"})})]}),c.jsx("aside",{className:`${o?"max-h-[60vh]":"max-h-0"} md:max-h-none md:w-80 overflow-hidden md:overflow-y-auto transition-all duration-300 ease-out bg-white border-t md:border-t-0 md:border-l border-gray-200`,children:c.jsx("div",{className:"overflow-y-auto max-h-[60vh] md:max-h-none",children:c.jsx(Ef,{})})})]}),u==="map"&&c.jsx("div",{className:"flex-1 relative",children:h?c.jsx(Nf,{images:T?.images||[],photoGroups:T?.photoGroups||[],mapData:D,orthophoto:k}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-400",children:"Select a building to view map data"})})}),u==="3d"&&c.jsx("div",{className:"flex-1 relative",children:h?c.jsx(x.Suspense,{fallback:c.jsx("div",{className:"flex items-center justify-center h-full bg-white",children:c.jsxs("div",{className:"text-center text-gray-400",children:[c.jsx("div",{className:"spinner-light mb-4"}),c.jsx("p",{children:"Loading 3D viewer..."})]})}),children:c.jsx(Pf,{images:T?.images||[],photoGroups:T?.photoGroups||[],modelUrl:L?.url,modelTransform:L?.transform,originLat:L?.originLat,originLon:L?.originLon})}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-400",children:"Select a building to view 3D model"})})})]})]})]})}function Mf(){const[t,e]=x.useState("loading");return x.useEffect(()=>Fl(Bi,s=>{e(s?"signed-in":"signed-out")}),[]),t==="loading"?c.jsx("div",{className:"flex items-center justify-center h-screen bg-white font-gravesend",children:c.jsx("div",{className:"spinner-light"})}):t==="signed-out"?c.jsx(Of,{}):c.jsx($a,{client:jf,children:c.jsx(Df,{})})}const sp=Object.freeze(Object.defineProperty({__proto__:null,default:Mf},Symbol.toStringTag,{value:"Module"}));export{sp as P,ed as c,Re as u};
